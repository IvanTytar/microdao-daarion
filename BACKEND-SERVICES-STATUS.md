# –°—Ç–∞—Ç—É—Å –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Backend –°–µ—Ä–≤—ñ—Å—ñ–≤

**–î–∞—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:** 2025-01-XX  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∫–æ–≤–æ –ø—Ä–∞—Ü—é—î

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

### ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏

1. **DAGI Router (NODE1)**
   - URL: `http://144.76.224.179:9102`
   - –°—Ç–∞—Ç—É—Å: ‚úÖ **–î–æ—Å—Ç—É–ø–Ω–∏–π** (HTTP 200)
   - Health check: `{"status":"healthy","service":"dagi-router"}`
   - –ü—Ä–æ–±–ª–µ–º–∞: ‚ö†Ô∏è LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ ("Provider error: All connection attempts failed")

### ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏

1. **Agent Cabinet Service**
   - URL: `http://localhost:8898`
   - –°—Ç–∞—Ç—É—Å: ‚ùå **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π** (Connection refused)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –ü—Ä–æ–º—ñ–∂–Ω–∏–π —Å–µ—Ä–≤—ñ—Å –¥–ª—è —á–∞—Ç—É –∑ –∞–≥–µ–Ω—Ç–∞–º–∏

2. **NODE1 API**
   - URL: `http://144.76.224.179:8899`
   - –°—Ç–∞—Ç—É—Å: ‚ùå **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π** (Connection refused)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: API –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∞–≥–µ–Ω—Ç—ñ–≤ —Ç–∞ –º–µ—Ç—Ä–∏–∫

3. **API MicroDAO**
   - URL: `https://api.microdao.xyz`
   - –°—Ç–∞—Ç—É—Å: ‚ùå **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π** (ERR_NAME_NOT_RESOLVED)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –û—Å–Ω–æ–≤–Ω–∏–π API –¥–ª—è –º—ñ–∫—Ä–æ–î–ê–û

---

## üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —É —á–∞—Ç—ñ

**–§–∞–π–ª:** `src/components/microdao/MicroDaoOrchestratorChat.tsx`

**–ó–º—ñ–Ω–∏:**
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ `agentId` - –ø—Ä–∏–±–∏—Ä–∞—î–º–æ –ø—Ä–µ—Ñ—ñ–∫—Å `agent-` –¥–ª—è Router
- ‚úÖ –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ fallback –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ç–∞–π–º–∞—É—Ç 15 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤

**–ö–æ–¥:**
```typescript
// –í–∏–∑–Ω–∞—á–∞—î–º–æ agentId –¥–ª—è Router (–±–µ–∑ –ø—Ä–µ—Ñ—ñ–∫—Å—É)
let agentId = orchestratorAgentId || orchestrator?.id || 'microdao_orchestrator';
if (agentId.startsWith('agent-')) {
  agentId = agentId.replace(/^agent-/, '');
}

// –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
if (errorMessage.includes('Provider error') || 
    errorMessage.includes('connection attempts failed')) {
  return {
    response: 'LLM —Å–µ—Ä–≤—ñ—Å —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π. –ú–æ–¥–µ–ª—å –Ω–µ –º–æ–∂–µ –æ–±—Ä–æ–±–∏—Ç–∏ –∑–∞–ø–∏—Ç –∑–∞—Ä–∞–∑.',
    message: 'LLM —Å–µ—Ä–≤—ñ—Å —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π. –ú–æ–¥–µ–ª—å –Ω–µ –º–æ–∂–µ –æ–±—Ä–æ–±–∏—Ç–∏ –∑–∞–ø–∏—Ç –∑–∞—Ä–∞–∑.',
  };
}
```

### 2. –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —É API Client

**–§–∞–π–ª:** `src/api/client.ts`

**–ó–º—ñ–Ω–∏:**
- ‚úÖ –ü–æ–º–∏–ª–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —è–∫ –æ—á—ñ–∫—É–≤–∞–Ω—ñ
- ‚úÖ –ó–º–µ–Ω—à–µ–Ω–æ —à—É–º —É –∫–æ–Ω—Å–æ–ª—ñ –¥–ª—è fallback –≤–∏–ø–∞–¥–∫—ñ–≤

### 3. –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ Workspace API

**–§–∞–π–ª:** `src/api/workspaces.ts`

**–ó–º—ñ–Ω–∏:**
- ‚úÖ –ü–æ–º–∏–ª–∫–∏ API –Ω–µ –ª–æ–≥—É—é—Ç—å—Å—è —è–∫ –∫—Ä–∏—Ç–∏—á–Ω—ñ, —è–∫—â–æ —Ü–µ –æ—á—ñ–∫—É–≤–∞–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è
- ‚úÖ Fallback –¥–∞–Ω—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –î–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ Agent Cabinet Service**
   ```bash
   # –ù–∞ NODE1 –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–æ
   cd services/agent-cabinet-service
   python -m uvicorn app.main:app --host 0.0.0.0 --port 8898
   ```

2. **–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ –Ω–∞ NODE1**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ Ollama –ø—Ä–∞—Ü—é—î: `curl http://144.76.224.179:11434/api/tags`
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Router –¥–ª—è –∞–≥–µ–Ω—Ç–∞ `helion`
   - –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –º–æ–¥–µ–ª—å `local_qwen3_8b` –¥–æ—Å—Ç—É–ø–Ω–∞

3. **–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ API MicroDAO**
   - –ê–±–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ DNS –¥–ª—è `api.microdao.xyz`
   - –ê–±–æ –∑–º—ñ–Ω–∏—Ç–∏ `VITE_API_URL` –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∏–π —Å–µ—Ä–≤–µ—Ä

---

## ‚úÖ –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω

- ‚úÖ Frontend –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Fallback –æ–±—Ä–æ–±–∫–∞ –ø—Ä–∞—Ü—é—î
- ‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ Energy Union –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è
- ‚úÖ –ß–∞—Ç –∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –ø—Ä–∞—Ü—é—î (–∑ fallback –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏)
- ‚ö†Ô∏è Backend —Å–µ—Ä–≤—ñ—Å–∏ —á–∞—Å—Ç–∫–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ
- ‚ö†Ô∏è LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ

---

## üìù –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Ollama –Ω–∞ NODE1
2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Agent Cabinet Service
3. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ URL –¥–ª—è API —Å–µ—Ä–≤—ñ—Å—ñ–≤
4. –î–æ–¥–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π mock —Å–µ—Ä–≤—ñ—Å –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)




