# –ü—ñ–¥—Å—É–º–æ–∫ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó: Backend –¥–ª—è MicroDAO

## ‚úÖ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. Wallet Service –æ–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ `hasEnoughForMicroDaoCreate()` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ (–¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è MicroDAO)
- ‚úÖ `hasEnoughForAdminRole()` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ (–¥–ª—è —Ä–æ–ª—ñ Admin)
- ‚úÖ `hasEnoughForMicroDaoUsage()` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ 0.01 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ (–¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É)
- ‚úÖ `getDaarionBalance()` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É DAARION
- ‚úÖ Legacy –º–µ—Ç–æ–¥–∏ –∑–∞–ª–∏—à–µ–Ω–æ –¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ

### 2. DAOFactory Service –æ–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `hasEnoughForMicroDaoCreate()` –∑–∞–º—ñ—Å—Ç—å —Å—Ç–∞—Ä–æ–≥–æ –º–µ—Ç–æ–¥—É
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º MicroDAO
- ‚úÖ –ü–æ–º–∏–ª–∫–∞: `INSUFFICIENT_BALANCE: Need 1 DAARION on balance to create MicroDAO`

### 3. –ú—ñ–≥—Ä–∞—Ü—ñ—è –ë–î —Å—Ç–≤–æ—Ä–µ–Ω–∞
- ‚úÖ `000010_teams_type_and_city_links.sql`
- ‚úÖ –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ `type` –≤ —Ç–∞–±–ª–∏—Ü—é `teams` (city, platform, community, guild, lab, personal)
- ‚úÖ –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ `parent_team_id` –¥–ª—è —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–∞–±–ª–∏—Ü—é `city_links` –¥–ª—è –∑–≤'—è–∑–∫—ñ–≤ –º—ñ–∂ DAARION.city —Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
- ‚úÖ Seed –¥–∞–Ω—ñ –¥–ª—è DAARION.city (id='daarion-city', type='city', slug='daarion')

### 4. API Endpoints —Å—Ç–≤–æ—Ä–µ–Ω–æ
- ‚úÖ `POST /api/v1/teams` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è MicroDAO (–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é 1 DAARION)
- ‚úÖ `GET /api/v1/teams` - —Å–ø–∏—Å–æ–∫ teams/MicroDAO
- ‚úÖ `GET /api/v1/teams/:teamId` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è team/MicroDAO
- ‚úÖ `POST /api/v1/teams/:teamId/members` - –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞–º–∏ –±–∞–ª–∞–Ω—Å—É)

### 5. –¢–∏–ø–∏ –æ–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ `Team` interface - –¥–æ–¥–∞–Ω–æ –ø–æ–ª—è `type`, `parent_team_id`, `slug`
- ‚úÖ `CreateTeamRequest` interface - –¥–æ–¥–∞–Ω–æ –ø–æ–ª—è `type`, `slug`, `mode`

### 6. –õ–æ–≥—ñ–∫–∞ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è
- ‚úÖ Admin –º–æ–∂–µ –∑–∞–ø—Ä–æ—Å–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –º–∞—î 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ
- ‚úÖ –î–ª—è —Ä–æ–ª—ñ Admin: –∑–∞–ø—Ä–æ—à–µ–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –º–∞—Ç–∏ 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ
- ‚úÖ –î–ª—è —Ä–æ–ª—ñ Member: –∑–∞–ø—Ä–æ—à–µ–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –º–∞—Ç–∏ 0.01 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ

---

## üìã –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø—É (–ø—ñ–¥—Å—É–º–æ–∫)

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è MicroDAO
- **–ü–æ—Ç—Ä—ñ–±–Ω–æ:** 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ (–Ω–µ —Å—Ç–µ–π–∫—ñ–Ω–≥)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–æ–ª—å Admin —É —Å—Ç–≤–æ—Ä–µ–Ω–æ–º—É MicroDAO

### –î–æ–¥–∞–≤–∞–Ω–Ω—è Admin
- **–ü–æ—Ç—Ä—ñ–±–Ω–æ:** 
  - –ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á: 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ
  - –ó–∞–ø—Ä–æ—à–µ–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á: 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–æ–ª—å Admin —É MicroDAO

### –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è Member
- **–ü–æ—Ç—Ä—ñ–±–Ω–æ:**
  - –ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á: 1 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ (Admin)
  - –ó–∞–ø—Ä–æ—à–µ–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á: 0.01 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–æ–ª—å Member —É MicroDAO

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É MicroDAO
- **–ü–æ—Ç—Ä—ñ–±–Ω–æ:** 0.01 DAARION –Ω–∞ –±–∞–ª–∞–Ω—Å—ñ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ—Å—Ç—É–ø –¥–æ —Ñ—É–Ω–∫—Ü—ñ–π MicroDAO

---

## üîÑ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### Frontend (Console UI)
1. [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É `/console`
2. [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç "–°—Ç–≤–æ—Ä–∏—Ç–∏ MicroDAO" (–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –±–∞–ª–∞–Ω—Å—É)
3. [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç "–°–ø–∏—Å–æ–∫ MicroDAO" (–≤–∫–ª—é—á–∞—é—á–∏ DAARION.city)
4. [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç "Wallet" (–±–∞–ª–∞–Ω—Å–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É)
5. [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç "–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞" (–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞–º–∏ –±–∞–ª–∞–Ω—Å—É)

### Backend (–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è)
1. [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ä–µ–∞–ª—å–Ω–æ—é –ë–î (–∑–∞–º—ñ—Å—Ç—å –∑–∞–≥–ª—É—à–æ–∫)
2. [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è team record –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ MicroDAO
3. [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è team_member record –ø—Ä–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ñ
4. [ ] –û—Ç—Ä–∏–º–∞–Ω–Ω—è user_id –∑ email –ø—Ä–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ñ

---

## üìù –§–∞–π–ª–∏, —è–∫—ñ –±—É–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ/—Å—Ç–≤–æ—Ä–µ–Ω—ñ

### –°—Ç–≤–æ—Ä–µ–Ω—ñ:
- `supabase/migrations/000010_teams_type_and_city_links.sql`
- `src/api/http/teams.routes.ts`
- `IMPLEMENTATION_SUMMARY.md`

### –û–Ω–æ–≤–ª–µ–Ω—ñ:
- `src/services/wallet/wallet.service.ts`
- `src/services/wallet/wallet.interface.ts`
- `src/services/dao-factory/dao-factory.service.ts`
- `src/types/api.ts`
- `src/app.ts`
- `supabase/migrations/README.md`

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–æ:

1. **–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é:**
   ```bash
   psql -d microdao -f supabase/migrations/000010_teams_type_and_city_links.sql
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ API endpoints:**
   - `POST /api/v1/teams` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è MicroDAO
   - `POST /api/v1/teams/:teamId/members` - –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å—É:**
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–µ–∑ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ–≥–æ –±–∞–ª–∞–Ω—Å—É ‚Üí –ø–æ–º–∏–ª–∫–∞ 403
   - –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è Admin –±–µ–∑ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ–≥–æ –±–∞–ª–∞–Ω—Å—É ‚Üí –ø–æ–º–∏–ª–∫–∞ 403
   - –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è Member –±–µ–∑ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ–≥–æ –±–∞–ª–∞–Ω—Å—É ‚Üí –ø–æ–º–∏–ª–∫–∞ 403

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 2024-11-14

