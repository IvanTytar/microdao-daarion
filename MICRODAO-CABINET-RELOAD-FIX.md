# ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤ –º—ñ–∫—Ä–æ–î–ê–û

**–î–∞—Ç–∞:** 2025-11-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–°—Ç–æ—Ä—ñ–Ω–∫–∏ –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤ –º—ñ–∫—Ä–æ–î–ê–û –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏—Å—è —á–µ—Ä–µ–∑:
- –ù–µ—Å—Ç–∞–±—ñ–ª—å–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –Ω–∞ –∫–æ–∂–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó
- –ó–∞–Ω–∞–¥—Ç–æ —á–∞—Å—Ç—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ React Query

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### 1. –î–æ–¥–∞–Ω–æ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é –æ–±—á–∏—Å–ª–µ–Ω—å

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `useMemo` –¥–ª—è:**
- `orchestratorMapping` - –º–∞–ø–ø—ñ–Ω–≥ –º—ñ–∂ –∞–≥–µ–Ω—Ç–∞–º–∏ —Ç–∞ –º—ñ–∫—Ä–æ–î–ê–û
- `microDaoId` - –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π ID –º—ñ–∫—Ä–æ–î–ê–û
- `orchestratorAgentId` - ID –∞–≥–µ–Ω—Ç–∞-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `orchestratorFromNode1` - –ø–æ—à—É–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–µ—Ä–µ–¥ –∞–≥–µ–Ω—Ç—ñ–≤ –∑ –ù–û–î–ò1
- `allAgents` - –æ–±'—î–¥–Ω–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç—ñ–≤
- `teamData` - –¥–∞–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ (–∑ fallback)

**–§–∞–π–ª:** `src/pages/MicroDaoCabinetPage.tsx`

```typescript
// –ú–µ–º–æ—ñ–∑—É—î–º–æ –º–∞–ø–ø—ñ–Ω–≥
const orchestratorMapping = useMemo(
  () => getAgentByMicroDaoId(microDaoIdParam),
  [microDaoIdParam]
);

// –ú–µ–º–æ—ñ–∑—É—î–º–æ ID
const microDaoId = useMemo(
  () => orchestratorMapping?.microDaoId || microDaoIdParam,
  [orchestratorMapping, microDaoIdParam]
);

// –ú–µ–º–æ—ñ–∑—É—î–º–æ –ø–æ—à—É–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
const orchestratorFromNode1 = useMemo(() => {
  // ... –ª–æ–≥—ñ–∫–∞ –ø–æ—à—É–∫—É
}, [node1AgentsData, orchestratorAgentId, orchestratorMapping]);

// –ú–µ–º–æ—ñ–∑—É—î–º–æ –æ–±'—î–¥–Ω–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç—ñ–≤
const allAgents = useMemo(() => {
  // ... –ª–æ–≥—ñ–∫–∞ –æ–±'—î–¥–Ω–∞–Ω–Ω—è
}, [agentsData?.items, orchestratorFromNode1]);
```

---

### 2. –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ React Query

**–î–æ–¥–∞–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∑–º–µ–Ω—à–µ–Ω–Ω—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å:**

```typescript
const { data: team } = useQuery({
  queryKey: ['team', microDaoId],
  queryFn: async () => { /* ... */ },
  enabled: !!microDaoId,
  staleTime: 60000, // –î–∞–Ω—ñ –≤–≤–∞–∂–∞—é—Ç—å—Å—è —Å–≤—ñ–∂–∏–º–∏ 1 —Ö–≤–∏–ª–∏–Ω—É
  gcTime: 300000, // –ö–µ—à –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è 5 —Ö–≤–∏–ª–∏–Ω
  refetchOnWindowFocus: false, // –ù–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ø—Ä–∏ —Ñ–æ–∫—É—Å—ñ –≤—ñ–∫–Ω–∞
  refetchOnMount: false, // –ù–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ (—è–∫—â–æ –¥–∞–Ω—ñ —î –≤ –∫–µ—à—ñ)
});
```

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
- `staleTime: 60000` - –¥–∞–Ω—ñ –≤–≤–∞–∂–∞—é—Ç—å—Å—è —Å–≤—ñ–∂–∏–º–∏ 1 —Ö–≤–∏–ª–∏–Ω—É
- `gcTime: 300000` - –∫–µ—à –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è 5 —Ö–≤–∏–ª–∏–Ω
- `refetchOnWindowFocus: false` - –Ω–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ø—Ä–∏ —Ñ–æ–∫—É—Å—ñ –≤—ñ–∫–Ω–∞
- `refetchOnMount: false` - –Ω–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ (—è–∫—â–æ –¥–∞–Ω—ñ —î –≤ –∫–µ—à—ñ)

---

### 3. –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≥–µ–Ω—Ç—ñ–≤ –∑ –ù–û–î–ò1

**–ó–º—ñ–Ω–µ–Ω–æ queryKey:**
- –ë—É–ª–æ: `['node1-agents-for-microdao', microDaoId]`
- –°—Ç–∞–ª–æ: `['node1-agents-for-microdao']`

**–ü—Ä–∏—á–∏–Ω–∞:** –ê–≥–µ–Ω—Ç–∏ –∑ –ù–û–î–ò1 –æ–¥–Ω–∞–∫–æ–≤—ñ –¥–ª—è –≤—Å—ñ—Ö –º—ñ–∫—Ä–æ–î–ê–û, —Ç–æ–º—É –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–±–∏—Ç–∏ –æ–∫—Ä–µ–º–∏–π –∑–∞–ø–∏—Ç –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º—ñ–∫—Ä–æ–î–ê–û.

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚ùå –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∞—Å—è
- ‚ùå –û–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–∏–∫–æ–Ω—É–≤–∞–ª–∏—Å—è –Ω–∞ –∫–æ–∂–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ
- ‚ùå React Query —Ä–æ–±–∏–≤ –∑–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ –∑–∞–ø–∏—Ç—ñ–≤

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å—Ç–∞–±—ñ–ª—å–Ω–∞, –Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è
- ‚úÖ –û–±—á–∏—Å–ª–µ–Ω–Ω—è –º–µ–º–æ—ñ–∑–æ–≤–∞–Ω—ñ
- ‚úÖ React Query –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–µ—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
- ‚úÖ –ú–µ–Ω—à–µ –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ API

---

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `useMemo` –¥–ª—è:**
1. **orchestratorMapping** - –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `microDaoIdParam`
2. **microDaoId** - –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `orchestratorMapping` –∞–±–æ `microDaoIdParam`
3. **orchestratorAgentId** - –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `orchestratorMapping`
4. **orchestratorFromNode1** - –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `node1AgentsData`, `orchestratorAgentId` –∞–±–æ `orchestratorMapping`
5. **allAgents** - –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `agentsData?.items` –∞–±–æ `orchestratorFromNode1`
6. **teamData** - –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `team` –∞–±–æ `orchestratorMapping`

### React Query –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤:**
- `staleTime: 60000` - –¥–∞–Ω—ñ —Å–≤—ñ–∂—ñ 1 —Ö–≤–∏–ª–∏–Ω—É
- `gcTime: 300000` - –∫–µ—à –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è 5 —Ö–≤–∏–ª–∏–Ω
- `refetchOnWindowFocus: false` - –Ω–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ø—Ä–∏ —Ñ–æ–∫—É—Å—ñ
- `refetchOnMount: false` - –Ω–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü–æ—Å—Ç—ñ–π–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É—Å—É–Ω—É—Ç–æ
- ‚úÖ –ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è –æ–±—á–∏—Å–ª–µ–Ω—å
- ‚úÖ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è React Query
- ‚úÖ –°—Ç–∞–±—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤ –º—ñ–∫—Ä–æ–î–ê–û

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∏ –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤ –º—ñ–∫—Ä–æ–î–ê–û –ø—Ä–∞—Ü—é—é—Ç—å —Å—Ç–∞–±—ñ–ª—å–Ω–æ
- ‚úÖ –ù–µ–º–∞—î –∑–∞–π–≤–∏—Ö –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
- ‚úÖ –ï—Ñ–µ–∫—Ç–∏–≤–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–µ—à—É

---

**–ü—Ä–æ–±–ª–µ–º–∞ –∑ –ø–æ—Å—Ç—ñ–π–Ω–∏–º –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞!** üéâ

