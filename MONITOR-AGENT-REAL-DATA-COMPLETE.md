# ‚úÖ Monitor Agent - –†–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)

**–î–∞—Ç–∞:** 2025-11-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Monitor Agent —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç—ñ–ª—å–∫–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ

---

## üéØ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. –î–æ–¥–∞–Ω–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ –Ω–æ–¥

**–§—É–Ω–∫—Ü—ñ—è:** `get_real_node_metrics()`

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –û—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–æ–∫ –Ω–æ–¥ –∑ API (`/api/nodes`)
- –î–ª—è –∫–æ–∂–Ω–æ—ó –Ω–æ–¥–∏ –æ—Ç—Ä–∏–º—É—î –º–µ—Ç—Ä–∏–∫–∏ –∑ `/api/nodes/{node_id}/metrics`
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —Ü–µ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (–Ω–µ HTML, –Ω–µ mock)
- –ü–æ–≤–µ—Ä—Ç–∞—î —Ç—ñ–ª—å–∫–∏ —Ä–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ (CPU, RAM, Disk, Network, Status)
- –Ø–∫—â–æ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î - –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫

### 2. –î–æ–¥–∞–Ω–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –∑–º—ñ–Ω –ø—Ä–æ—î–∫—Ç—É

**–§—É–Ω–∫—Ü—ñ—è:** `get_recent_project_changes()`

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –û—Ç—Ä–∏–º—É—î –æ—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ –∑ Memory Service
- –§—ñ–ª—å—Ç—Ä—É—î –ø–æ `kind: project_event`
- –§–æ—Ä–º–∞—Ç—É—î –∑–º—ñ–Ω–∏ –∑ –¥–µ—Ç–∞–ª—è–º–∏ (—Ç–∏–ø, –¥—ñ—è, —à–ª—è—Ö, —á–∞—Å)
- –ü–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ –∑–º—ñ–Ω–∏

### 3. –û–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è Monitor Agent

**–§—É–Ω–∫—Ü—ñ—è:** `get_monitor_memory_context()`

**–©–æ –¥–æ–¥–∞–Ω–æ:**
- üìä –†–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥ (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω—ñ)
- üìù –û—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ –ø—Ä–æ—î–∫—Ç—É (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω—ñ)
- üìã –ó–∞–≥–∞–ª—å–Ω—ñ –ø–æ–¥—ñ—ó —Å–∏—Å—Ç–µ–º–∏
- üìç –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ø–æ–¥—ñ—ó (–¥–ª—è –Ω–æ–¥–∏ –∞–±–æ –º—ñ–∫—Ä–æ–î–ê–û)

### 4. –û–Ω–æ–≤–ª–µ–Ω–æ System Prompt

**–©–æ –¥–æ–¥–∞–Ω–æ:**
- –ß—ñ—Ç–∫—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- –ó–∞–±–æ—Ä–æ–Ω–∞ –≤–∏–≥–∞–¥—É–≤–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ –∞–±–æ –∑–º—ñ–Ω–∏
- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó, —â–æ —Ä–æ–±–∏—Ç–∏, —è–∫—â–æ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î

### 5. –î–æ–¥–∞–Ω–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –≤ prompt

**–©–æ –¥–æ–¥–∞–Ω–æ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –≤ prompt, —è–∫—â–æ —Ä–µ–∞–ª—å–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ –Ω–µ–º–∞—î
- –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –≤ prompt, —è–∫—â–æ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –∑–º—ñ–Ω –Ω–µ–º–∞—î

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: "–Ø–∫—ñ —Ä–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥ –∑–∞—Ä–∞–∑?"

Monitor Agent: "–ó–∞—Ä–∞–∑ —É —Å–∏—Å—Ç–µ–º—ñ DAARION —î —Ç–∞–∫—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥:
- –ù–æ–¥–∞ 1: CPU 25%, RAM 4GB/8GB, Disk 70%..."
(–í–ò–ì–ê–î–ê–ù–Ü –¥–∞–Ω—ñ)
```

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: "–Ø–∫—ñ —Ä–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥ –∑–∞—Ä–∞–∑?"

Monitor Agent: "‚ö†Ô∏è –£–í–ê–ì–ê: –í –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –Ω–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ –Ω–æ–¥. 
–†–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ –∑–∞—Ä–∞–∑."
(–ß–ï–°–ù–ê –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –Ω–µ –≤–∏–≥–∞–¥—É—î –¥–∞–Ω—ñ)
```

### –Ø–∫—â–æ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ:

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: "–Ø–∫—ñ —Ä–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥ –∑–∞—Ä–∞–∑?"

Monitor Agent: "üìä –†–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥:

–ù–û–î–ê node-1-hetzner-gex44 (–†–ï–ê–õ–¨–ù–Ü –¥–∞–Ω—ñ –∑ API):
- CPU: 25%
- RAM: 45%
- Disk: 70%
- Network: ‚Üì1.2 MB/s ‚Üë0.8 MB/s
- –°—Ç–∞—Ç—É—Å: online

–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –Ω–æ–¥: 1/2"
(–†–ï–ê–õ–¨–ù–Ü –¥–∞–Ω—ñ –∑ API)
```

---

## üîß Environment Variables

```bash
# API –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ —Ç–∞ –¥–∞–Ω–∏—Ö
FRONTEND_API_URL=http://localhost:8899
NODE_REGISTRY_URL=http://localhost:9205
MEMORY_SERVICE_URL=http://localhost:8000
OLLAMA_BASE_URL=http://localhost:11434
MISTRAL_MODEL=mistral-nemo:12b
```

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫

```bash
curl -X POST http://localhost:9500/api/agent/monitor/chat \
  -H "Content-Type: application/json" \
  -d '{"agent_id":"monitor","message":"–Ø–∫—ñ —Ä–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥ –∑–∞—Ä–∞–∑? –ü–æ–∫–∞–∂–∏ —Ç—ñ–ª—å–∫–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∑ API.","node_id":null}'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –†–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –∑ API (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω—ñ)
- –ê–±–æ: "‚ö†Ô∏è –£–í–ê–ì–ê: –í –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –Ω–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ –Ω–æ–¥. –†–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ –∑–∞—Ä–∞–∑."

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ –∞–≥–µ–Ω—Ç –Ω–µ –≤–∏–≥–∞–¥—É—î –¥–∞–Ω—ñ

```bash
curl -X POST http://localhost:9500/api/agent/monitor/chat \
  -H "Content-Type: application/json" \
  -d '{"agent_id":"monitor","message":"–Ø–∫—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥–∏ node-999?","node_id":null}'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- "–†–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –Ω–æ–¥–∏ node-999 –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ –∑–∞—Ä–∞–∑"
- –ù–ï –≤–∏–≥–∞–¥–∞–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏

---

## üìù –í–∏—Å–Ω–æ–≤–∫–∏

### ‚úÖ –©–æ –ø—Ä–∞—Ü—é—î:

1. **Monitor Agent –æ—Ç—Ä–∏–º—É—î —Ä–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥** (—è–∫—â–æ API –¥–æ—Å—Ç—É–ø–Ω–∏–π)
2. **Monitor Agent –æ—Ç—Ä–∏–º—É—î –æ—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ –ø—Ä–æ—î–∫—Ç—É** (–∑ Memory Service)
3. **Monitor Agent –ù–ï –≤–∏–≥–∞–¥—É—î –¥–∞–Ω—ñ** (—á–µ—Å–Ω–æ –∫–∞–∂–µ, —è–∫—â–æ –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î)
4. **System Prompt –∑–∞–±–æ—Ä–æ–Ω—è—î –≤–∏–≥–∞–¥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ**
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –≤ prompt** (—è–∫—â–æ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î)

### ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:

- Monitor Agent —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –¢–Ü–õ–¨–ö–ò —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ
- –Ø–∫—â–æ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î - –∞–≥–µ–Ω—Ç —á–µ—Å–Ω–æ –ø—Ä–æ —Ü–µ –∫–∞–∂–µ
- –ê–≥–µ–Ω—Ç –ù–ï –≤–∏–≥–∞–¥—É—î –º–µ—Ç—Ä–∏–∫–∏ –∞–±–æ –∑–º—ñ–Ω–∏
- –ê–≥–µ–Ω—Ç –≤–∫–∞–∑—É—î –¥–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö (—è–∫–∞ –Ω–æ–¥–∞, —è–∫–∏–π —á–∞—Å)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Monitor Agent —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç—ñ–ª—å–∫–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ —Ç–∞ —á–µ—Å–Ω–æ –∫–∞–∂–µ, —è–∫—â–æ –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î





