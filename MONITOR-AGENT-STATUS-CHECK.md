# ‚úÖ –°—Ç–∞—Ç—É—Å Monitor Agent - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

## üìä –ü–æ—Ç–æ—á–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è

### 1. –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç—ñ–≤ –Ω–∞ –ù–û–î–ê2

**–ß–∏ —Ä–µ–∞–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ—Ö –∞–≥–µ–Ω—Ç—ñ–≤?**
- ‚úÖ **–¢–∞–∫, —Ä–µ–∞–ª—å–Ω–æ!** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
- ‚úÖ –ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ `/nodes/node-2` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –¥–µ–ø–ª–æ–π
- ‚ö†Ô∏è **–ê–ª–µ:** –ü–æ—Ç—Ä—ñ–±–µ–Ω —Ä–µ–∞–ª—å–Ω–∏–π backend API endpoint –¥–ª—è –¥–µ–ø–ª–æ—é

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
1. –ü—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ù–û–î–ê2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å
2. –ó–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –Ω–µ –∑–∞–¥–µ–ø–ª–æ—î–Ω—ñ –∞–≥–µ–Ω—Ç–∏
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –¥–µ–ø–ª–æ–π (—á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥–∏)
4. –Ø–∫—â–æ API –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è mock –¥–µ–ø–ª–æ–π

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é:**
- Backend API endpoint: `POST /api/v1/node2/agents/{agentId}/deploy`
- –ê–±–æ –ª–æ–∫–∞–ª—å–Ω–∏–π endpoint: `POST /api/agent/{agentId}/deploy`
- –ê–±–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ NodeAgent –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é

---

### 2. Monitor Agent –ø–∞–º'—è—Ç—å

**–ß–∏ –∑–∞–ø–∞–º'—è—Ç–æ–≤—É—î Monitor Agent –≤—Å—ñ –∑–º—ñ–Ω–∏ –Ω–∞ –ø–æ—Ä—Ç—É 8899?**
- ‚úÖ **–¢–∞–∫!** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
- ‚úÖ WebSocket `/ws/events` –∑–±–∏—Ä–∞—î –≤—Å—ñ –ø–æ–¥—ñ—ó
- ‚úÖ –ü–æ–¥—ñ—ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ Memory Service (PostgreSQL)
- ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó (10 –ø–æ–¥—ñ–π –∞–±–æ 5 —Å–µ–∫—É–Ω–¥)

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
1. WebSocket –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ `/ws/events`
2. –í—Å—ñ –ø–æ–¥—ñ—ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –±–∞—Ç—á—É
3. –ë–∞—Ç—á –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ Memory Service —á–µ—Ä–µ–∑ `/api/memory/monitor-events/batch`
4. –ü–æ–¥—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∑ `agent_id = "monitor-{node_id}"`

**–î–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø–æ–¥—ñ—ó:**
- PostgreSQL: —Ç–∞–±–ª–∏—Ü—è `agent_memory_events`
- Agent ID: `monitor-node-2` (–¥–ª—è –ù–û–î–ê2)
- Scope: `long_term`
- Kind: `node_event`, `agent_event`, `system_event`, `project_event`

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –ø–æ–¥—ñ—ó
curl http://localhost:8000/agents/monitor-node-2/memory?limit=10
```

---

### 3. Monitor Agent —á–∞—Ç

**–ß–∏ –º–æ–∂–µ Monitor Agent –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è?**
- ‚ö†Ô∏è **–ß–∞—Å—Ç–∫–æ–≤–æ:** Endpoint –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ, –∞–ª–µ –ø–æ—Ç—Ä–µ–±—É—î backend
- ‚úÖ Frontend –≥–æ—Ç–æ–≤–∏–π: `POST /api/agent/monitor/chat`
- ‚ö†Ô∏è Backend endpoint: –ø–æ—Ç—Ä–µ–±—É—î DAGI Router –∞–±–æ –ø—Ä—è–º–∏–π LLM

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
1. Frontend –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç: `POST /api/agent/monitor/chat`
2. Backend –º–∞—î –æ–±—Ä–æ–±–∏—Ç–∏ —á–µ—Ä–µ–∑ DAGI Router –∞–±–æ –ø—Ä—è–º–∏–π LLM
3. Monitor Agent –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –ø–∞–º'—è—Ç—ñ —á–µ—Ä–µ–∑ Memory Service
4. –í—ñ–¥–ø–æ–≤—ñ–¥—å —Ñ–æ—Ä–º—É—î—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–∞–º'—è—Ç—ñ —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –¥–∞–Ω–∏—Ö

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –ø–æ–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏:**
- Backend endpoint `/api/agent/monitor/chat` –º–∞—î:
  - –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  - –ó–∞–ø–∏—Ç—É–≤–∞—Ç–∏ –ø–∞–º'—è—Ç—å –∑ Memory Service
  - –§–æ—Ä–º—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑ –ø–æ–¥—ñ–π
  - –í—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –¥–æ LLM (—á–µ—Ä–µ–∑ DAGI Router –∞–±–æ –ø—Ä—è–º–∏–π)
  - –ü–æ–≤–µ—Ä—Ç–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å

**Fallback:**
- –Ø–∫—â–æ backend –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞
- –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ mock –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é –∞–≥–µ–Ω—Ç—ñ–≤:
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ backend endpoint –¥–ª—è –¥–µ–ø–ª–æ—é
2. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ NodeAgent –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É
3. –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π API –¥–ª—è –¥–µ–ø–ª–æ—é –∞–≥–µ–Ω—Ç—ñ–≤

### –î–ª—è Monitor Agent –ø–∞–º'—è—Ç—ñ:
1. ‚úÖ –í–∂–µ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ Memory Service –∑–∞–ø—É—â–µ–Ω–∏–π
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ WebSocket –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π

### –î–ª—è Monitor Agent —á–∞—Ç—É:
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ backend endpoint `/api/agent/monitor/chat`
2. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ Memory Service –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
3. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –¥–æ LLM (DAGI Router –∞–±–æ –ø—Ä—è–º–∏–π)

---

## ‚úÖ –©–æ –≤–∂–µ –ø—Ä–∞—Ü—é—î

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π –∞–≥–µ–Ω—Ç—ñ–≤ (–∑ fallback)
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–¥—ñ–π –≤ Memory Service
- ‚úÖ WebSocket –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–ª—è –ø–æ–¥—ñ–π
- ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- ‚úÖ Frontend –¥–ª—è —á–∞—Ç—É –∑ Monitor Agent

## ‚ö†Ô∏è –©–æ –ø–æ—Ç—Ä–µ–±—É—î backend

- ‚ö†Ô∏è –†–µ–∞–ª—å–Ω–∏–π –¥–µ–ø–ª–æ–π –∞–≥–µ–Ω—Ç—ñ–≤ (–ø–æ—Ç—Ä—ñ–±–µ–Ω API)
- ‚ö†Ô∏è Monitor Agent —á–∞—Ç (–ø–æ—Ç—Ä—ñ–±–µ–Ω backend endpoint)
- ‚ö†Ô∏è –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ LLM –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

---

**Status:** ‚úÖ Frontend –≥–æ—Ç–æ–≤–∏–π, ‚ö†Ô∏è Backend –ø–æ—Ç—Ä–µ–±—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

