# üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è Monitor Agent

**–î–∞—Ç–∞:** 2025-11-23  
**–ß–∞—Å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** 04:30

---

## üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—ñ–≤

### ‚úÖ Memory Service
- **URL:** `http://localhost:8000`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∞—Ü—é—î
- **Health Check:** `{"status":"ok","service":"memory-service"}`
- **–ü–∞–º'—è—Ç—å:** –î–æ—Å—Ç—É–ø–Ω–∞ (–ø–æ—Ç—Ä–µ–±—É—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è)

### ‚úÖ Ollama
- **URL:** `http://localhost:11434`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∞—Ü—é—î
- **–î–æ—Å—Ç—É–ø–Ω—ñ –º–æ–¥–µ–ª—ñ:**
  - ‚úÖ `mistral-nemo:12b` (–æ—Å–Ω–æ–≤–Ω–∞ –º–æ–¥–µ–ª—å –¥–ª—è Monitor Agent)
  - ‚úÖ `gemma2:27b`
  - ‚úÖ `deepseek-coder:33b`
  - ‚úÖ `qwen2.5-coder:32b`
  - ‚úÖ `deepseek-r1:70b`
  - ‚úÖ `gpt-oss:latest`
  - ‚úÖ `starcoder2:3b`
  - ‚úÖ `phi3:latest`

### ‚ö†Ô∏è Monitor Agent Service
- **URL:** `http://localhost:9500`
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥—É–ª—å `httpx` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É Python
- **–†—ñ—à–µ–Ω–Ω—è:** –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ venv

---

## üìã –í—Å—å–æ–≥–æ Monitor Agent

### –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å: **6+ –∞–≥–µ–Ω—Ç—ñ–≤**

1. **–ó–∞–≥–∞–ª—å–Ω–∏–π Monitor Agent (DAARION)**
   - ID: `agent-monitor`
   - –ú–æ–¥–µ–ª—å: `mistral-nemo:12b`
   - Endpoint: `/api/agent/monitor/chat`

2. **Monitor Agent –¥–ª—è –ù–û–î–ê1**
   - ID: `agent-monitor-node1`
   - –ú–æ–¥–µ–ª—å: `mistral-nemo:12b`
   - Endpoint: `/api/agent/monitor-node-node-1/chat`

3. **Monitor Agent –¥–ª—è –ù–û–î–ê2**
   - ID: `agent-monitor-node2`
   - –ú–æ–¥–µ–ª—å: `mistral-nemo:12b`
   - Endpoint: `/api/agent/monitor-node-node-2/chat`

4. **Monitor Agent –¥–ª—è DAARION MicroDAO**
   - ID: `agent-monitor-microdao-daarion-dao`
   - –ú–æ–¥–µ–ª—å: `mistral-nemo:12b`
   - Endpoint: `/api/agent/monitor-microdao-daarion-dao/chat`

5. **Monitor Agent –¥–ª—è GREENFOOD MicroDAO**
   - ID: `agent-monitor-microdao-greenfood-dao`
   - –ú–æ–¥–µ–ª—å: `mistral-nemo:12b`
   - Endpoint: `/api/agent/monitor-microdao-greenfood-dao/chat`

6. **Monitor Agent –¥–ª—è ENERGY UNION MicroDAO**
   - ID: `agent-monitor-microdao-energy-union-dao`
   - –ú–æ–¥–µ–ª—å: `mistral-nemo:12b`
   - Endpoint: `/api/agent/monitor-microdao-energy-union-dao/chat`

---

## ü§ñ –ú–æ–¥–µ–ª—ñ —Ç–∞ Backend

### –í—Å—ñ Monitor Agent –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å:

**–ú–æ–¥–µ–ª—å:** `mistral-nemo:12b`  
**Backend:** `ollama`  
**Ollama URL:** `http://localhost:11434` (–ª–æ–∫–∞–ª—å–Ω–∏–π)

**Fallback –º–æ–¥–µ–ª—ñ** (—è–∫—â–æ –æ—Å–Ω–æ–≤–Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞):
1. `mistral-nemo:12b` ‚úÖ (–¥–æ—Å—Ç—É–ø–Ω–∞)
2. `gpt-oss:latest` ‚úÖ (–¥–æ—Å—Ç—É–ø–Ω–∞)
3. `mistral:7b` (—è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
4. `mistral:latest` (—è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:**
- Temperature: 0.7 (–¥–ª—è —á–∞—Ç—É), 0.5 (–¥–ª—è project changes)
- Max tokens: 800 (–¥–ª—è —á–∞—Ç—É), 300 (–¥–ª—è project changes)
- Top-p: 0.9
- Top-k: 40

---

## üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ

### ‚úÖ –ü—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

**–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:**

1. **–ü–æ–¥–≤—ñ–π–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:**
   - –ö–æ–∂–Ω–∞ –ø–æ–¥—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—É –ø–∞–º'—è—Ç—å:
     - `monitor-node-{node_id}` –¥–ª—è –ù–û–î
     - `monitor-microdao-{microdao_id}` –¥–ª—è –º—ñ–∫—Ä–æ–î–ê–û
   - –¢–∞–∫–æ–∂ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –∑–∞–≥–∞–ª—å–Ω—É –ø–∞–º'—è—Ç—å `monitor`

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:**
   - ‚úÖ WebSocket –ø–æ–¥—ñ—ó ‚Üí `addMonitorEventToBatch` ‚Üí Memory Service
   - ‚úÖ Project changes ‚Üí `saveToMonitorMemory` ‚Üí Memory Service
   - ‚úÖ –ë–∞—Ç—á–∏–Ω–≥: 10 –ø–æ–¥—ñ–π –∞–±–æ 5 —Å–µ–∫—É–Ω–¥

3. **Endpoints –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:**
   - `POST /api/memory/monitor-events/batch` - –±–∞—Ç—á –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
   - `POST /api/memory/monitor-events/{node_id}` - –æ–¥–Ω–µ –ø–æ–¥—ñ—è
   - `POST /api/agent/monitor/memory` - —á–µ—Ä–µ–∑ Monitor Agent Service

4. **–û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ:**
   - `GET /agents/{agent_id}/memory` - –ø–∞–º'—è—Ç—å –∞–≥–µ–Ω—Ç–∞ (–ø–æ—Ç—Ä–µ–±—É—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)
   - `GET /api/agent/monitor/project-history` - —ñ—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ—î–∫—Ç—É

**Memory Service:**
- ‚úÖ –ü—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É 8000
- ‚úÖ PostgreSQL –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –±–∞—Ç—á–∏–Ω–≥—É
- ‚ö†Ô∏è –ü–æ—Ç—Ä–µ–±—É—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ

---

## üéØ –ì–æ–ª–æ–≤–Ω–∏–π Monitor Agent

### –°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
- ‚úÖ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ
- ‚úÖ Endpoints –≥–æ—Ç–æ–≤—ñ
- ‚ö†Ô∏è –°–µ—Ä–≤—ñ—Å –ø–æ—Ç—Ä–µ–±—É—î –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–æ–¥—É–ª—å `httpx` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
- –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ venv

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# –í–∞—Ä—ñ–∞–Ω—Ç 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≥–ª–æ–±–∞–ª—å–Ω–æ
cd services/monitor-agent-service
python3 -m pip install httpx fastapi uvicorn

# –í–∞—Ä—ñ–∞–Ω—Ç 2: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ venv
cd services/monitor-agent-service
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
export OLLAMA_BASE_URL=http://localhost:11434
export MISTRAL_MODEL=mistral-nemo:12b
export MEMORY_SERVICE_URL=http://localhost:8000
python3 -m uvicorn app.main:app --host 0.0.0.0 --port 9500 --reload
```

---

## ‚úÖ –©–æ –ø—Ä–∞—Ü—é—î

1. **–í—Å—ñ Monitor Agent –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ:**
   - ‚úÖ –ó–∞–≥–∞–ª—å–Ω–∏–π Monitor Agent (DAARION)
   - ‚úÖ Monitor Agent –¥–ª—è –ù–û–î–ê1 —Ç–∞ –ù–û–î–ê2
   - ‚úÖ Monitor Agent –¥–ª—è –≤—Å—ñ—Ö –º—ñ–∫—Ä–æ–î–ê–û

2. **–ú–æ–¥–µ–ª—ñ:**
   - ‚úÖ `mistral-nemo:12b` –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ
   - ‚úÖ Fallback –Ω–∞ —ñ–Ω—à—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –º–æ–¥–µ–ª—ñ

3. **–ü–∞–º'—è—Ç—å:**
   - ‚úÖ Memory Service –ø—Ä–∞—Ü—é—î
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
   - ‚úÖ –ü–æ–¥–≤—ñ–π–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î
   - ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ

4. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
   - ‚úÖ –í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ
   - ‚úÖ –ß–∞—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

---

## ‚ö†Ô∏è –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏

1. **Monitor Agent Service:**
   - ‚ö†Ô∏è –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (`httpx`, `fastapi`, `uvicorn`)
   - ‚ö†Ô∏è –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
   - ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ (–ª–æ–∫–∞–ª—å–Ω–∏–π Ollama)

2. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
   - ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —á–∞—Ç –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
   - ‚è≥ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
   - ‚è≥ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

---

## üöÄ –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫—É

```bash
# 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
cd services/monitor-agent-service
python3 -m pip install httpx fastapi uvicorn

# 2. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ environment variables
export OLLAMA_BASE_URL=http://localhost:11434
export MISTRAL_MODEL=mistral-nemo:12b
export MEMORY_SERVICE_URL=http://localhost:8000

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
python3 -m uvicorn app.main:app --host 0.0.0.0 --port 9500 --reload

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
curl http://localhost:9500/health

# 5. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —á–∞—Ç
curl -X POST http://localhost:9500/api/agent/monitor/chat \
  -H "Content-Type: application/json" \
  -d '{"agent_id":"monitor","message":"–ü—Ä–∏–≤—ñ—Ç!","node_id":null}'
```

---

## üìù –í–∏—Å–Ω–æ–≤–∫–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ:

1. **–í—Å—ñ Monitor Agent –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ** (6+ –∞–≥–µ–Ω—Ç—ñ–≤)
2. **–ú–æ–¥–µ–ª—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ** (`mistral-nemo:12b` —Ç–∞ fallback)
3. **–ü–∞–º'—è—Ç—å –ø—Ä–∞—Ü—é—î** (Memory Service –∞–∫—Ç–∏–≤–Ω–∏–π)
4. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≥–æ—Ç–æ–≤—ñ** (–≤—Å—ñ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ)

### ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ:

1. **–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ** –¥–ª—è Monitor Agent Service
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å** –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω
3. **–ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏** –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É

---

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏  
**–ü–∞–º'—è—Ç—å:** ‚úÖ –ü—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ  
**–ú–æ–¥–µ–ª—ñ:** ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ñ (`mistral-nemo:12b`)

