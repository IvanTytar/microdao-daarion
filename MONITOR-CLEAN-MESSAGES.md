# üßπ –û—á–∏—â–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å Monitor Agent

**–î–∞—Ç–∞:** 2025-11-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–æ –∑ –∫–æ–¥—É

---

## ‚úÖ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. –í–∏–¥–∞–ª–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–æ–¥—É

**–§–∞–π–ª:** `src/pages/DagiMonitorPage.tsx`

**–í–∏–¥–∞–ª–µ–Ω–æ:**
```typescript
// –¢–µ—Å—Ç–æ–≤–∞ –ø–æ–¥—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
setTimeout(() => {
  console.log('üß™ Sending test event to verify listener...');
  const testEvent = new CustomEvent('project-change', {
    detail: {
      message: 'ü§ñ **Monitor Agent –ø–æ–≤—ñ–¥–æ–º–ª—è—î:**\n\nüß™ –¢–µ—Å—Ç–æ–≤–∞ –ø–æ–¥—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∞',
      change: {
        id: 'test-event-' + Date.now(),
        type: 'test',
        action: 'test',
        path: 'test',
        timestamp: new Date().toISOString(),
      },
    },
  });
  window.dispatchEvent(testEvent);
}, 1000);
```

### 2. –í–∏–¥–∞–ª–µ–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫

**–í–∏–¥–∞–ª–µ–Ω–æ:**
```typescript
// –î–æ–¥–∞—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
const globalHandler = (e: Event) => {
  console.log('üåç Global handler received event:', e.type, (e as CustomEvent).detail);
};
window.addEventListener('project-change', globalHandler, false);
```

---

## üßπ –Ø–∫ –æ—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

### –°–ø–æ—Å—ñ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –í—ñ–¥–∫—Ä–∏—Ç–∏: `http://localhost:8899/dagi-monitor`
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ `F12` (–≤—ñ–¥–∫—Ä–∏—Ç–∏ DevTools)
3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
4. –í—Å—Ç–∞–≤–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É:

```javascript
// –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
localStorage.removeItem('monitor-chat-messages');
localStorage.removeItem('monitor-latest-changes');

// –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É
location.reload();
```

### –°–ø–æ—Å—ñ–± 2: –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ localStorage

```javascript
// –í–∏–¥–∞–ª–∏—Ç–∏ –í–°–Ü –¥–∞–Ω—ñ (–≤–∫–ª—é—á–∞—é—á–∏ auth —Ç–æ–∫–µ–Ω–∏!)
localStorage.clear();
location.reload();
```

### –°–ø–æ—Å—ñ–± 3: –í–∏–±—ñ—Ä–∫–æ–≤–æ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

```javascript
// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
const messages = JSON.parse(localStorage.getItem('monitor-chat-messages') || '[]');

// –í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
const filtered = messages.filter(msg => 
  !msg.content.includes('–¢–µ—Å—Ç–æ–≤–∞ –ø–æ–¥—ñ—è') && 
  !msg.id.includes('test-event')
);

// –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–∑–∞–¥
localStorage.setItem('monitor-chat-messages', JSON.stringify(filtered));

// –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
location.reload();
```

---

## üìä –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—ñ–ª—å—à–µ –Ω–µ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è

1. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É: `http://localhost:8899/dagi-monitor`
2. –í—ñ–¥–∫—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. **–ù–ï –º–∞—î –±—É—Ç–∏** –ª–æ–≥—ñ–≤:
   - ‚ùå `üß™ Sending test event to verify listener...`
   - ‚ùå `üß™ Test event dispatched, result: true`
   - ‚ùå `üåç Global handler received event...`

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Ä–µ–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å

1. –ü–æ—á–µ–∫–∞—Ç–∏ 5 —Å–µ–∫—É–Ω–¥
2. **–ú–∞—é—Ç—å –∑'—è–≤–∏—Ç–∏—Å—è** —Ä–µ–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ Monitor Agent
3. **–õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ:**
   - ‚úÖ `üì¶ Loaded X messages from localStorage`
   - ‚úÖ `‚úÖ Subscribed to project-change events`
   - ‚úÖ `üöÄ Starting real-time change tracking (every 3 seconds)...`
   - ‚úÖ `‚úÖ Adding Monitor Agent message to chat: ...`

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –æ—á–∏—â–µ–Ω–Ω—è:

‚ùå **–ü—Ä–æ–±–ª–µ–º–∏:**
- –¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑'—è–≤–ª—è–ª–æ—Å—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
- –î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ –ª–æ–≥–∏ –∑–∞—Å–º—ñ—á—É–≤–∞–ª–∏ –∫–æ–Ω—Å–æ–ª—å
- –ù–µ –±—É–ª–æ –∑—Ä–æ–∑—É–º—ñ–ª–æ —è–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω—ñ

### –ü—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è:

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢—ñ–ª—å–∫–∏ —Ä–µ–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ Monitor Agent
- –ß–∏—Å—Ç–∞ –∫–æ–Ω—Å–æ–ª—å –±–µ–∑ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∏—Ö –ª–æ–≥—ñ–≤
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑'—è–≤–ª—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–∂–Ω—ñ 3 —Å–µ–∫—É–Ω–¥–∏

---

## üìù –©–æ —Ç–µ–ø–µ—Ä –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è

### –†–µ–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:

```
ü§ñ **Monitor Agent:** üîß MODIFIED: ...node-1/swapper-service [node-1] | swapper
ü§ñ **Monitor Agent:** ü§ñ DEPLOYED: ...node-1/agents/yaromir [node-1] | yaromir
ü§ñ **Monitor Agent:** ‚öôÔ∏è MODIFIED: ...DagiMonitorPage.tsx
ü§ñ **Monitor Agent:** üìÑ CREATED: ...MONITOR-CLEAN-MESSAGES.md
```

### –ù–ï –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è:

‚ùå `üß™ –¢–µ—Å—Ç–æ–≤–∞ –ø–æ–¥—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∞` - –í–ò–î–ê–õ–ï–ù–û!

---

## üîß –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç –≤—Ä—É—á–Ω—É

```javascript
// –í –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
window.dispatchEvent(new CustomEvent('project-change', {
  detail: {
    message: 'ü§ñ **Monitor Agent:** üß™ –ú–∞–Ω—É–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç',
    change: {
      id: 'manual-test-' + Date.now(),
      type: 'test',
      action: 'test',
      path: 'manual-test',
      timestamp: new Date().toISOString(),
    },
  },
}));
```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–æ!  
**–î—ñ—è:** –û—á–∏—Å—Ç—ñ—Ç—å localStorage –∫–æ–º–∞–Ω–¥–æ—é –≤–∏—â–µ —ñ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É.




