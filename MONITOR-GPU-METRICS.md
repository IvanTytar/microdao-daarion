# ‚úÖ Monitor Agent - GPU –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –Ω–æ–¥

**–î–∞—Ç–∞:** 2025-11-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ–¥–∞–Ω–æ GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∫–æ–∂–Ω–æ—ó –Ω–æ–¥–∏

---

## üéØ –©–æ –¥–æ–¥–∞–Ω–æ

### GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö –Ω–æ–¥

**–°—Ç–æ—Ä—ñ–Ω–∫–∞:** `http://localhost:8899/dagi-monitor`  
**–†–æ–∑–¥—ñ–ª:** –ú–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥ (Node Metrics)

---

## üìä GPU –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –Ω–æ–¥–∞—Ö

### –ù–û–î–ê1 (Hetzner GEX44)

**GPU:** NVIDIA RTX 4000 SFF Ada Generation  
**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- VRAM: 20 GB GDDR6
- CUDA Cores: 6144
- Tensor Cores: 192 (4th Gen)
- RT Cores: 48 (3rd Gen)
- TDP: 70W

**–ú–µ—Ç—Ä–∏–∫–∏ –≤ Monitor Agent:**
- üü¢ GPU: 10-50% (—Ä–µ–∞–ª—å–Ω–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω –¥–ª—è Ollama/LLM)
- –ö–æ–ª—ñ—Ä —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞: –∑–µ–ª–µ–Ω–∏–π/–∂–æ–≤—Ç–∏–π/—á–µ—Ä–≤–æ–Ω–∏–π –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### –ù–û–î–ê2 (MacBook Pro M4 Max)

**GPU:** Apple M4 Max (40-core GPU)  
**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- Unified Memory: 48 GB (—Å–ø—ñ–ª—å–Ω–∞ –∑ RAM)
- GPU Cores: 40
- Metal 3 acceleration
- Neural Engine: 16-core

**–ú–µ—Ç—Ä–∏–∫–∏ –≤ Monitor Agent:**
- üü¢ GPU: 15-50% (—Ä–µ–∞–ª—å–Ω–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω –¥–ª—è Metal/Ollama)
- –ö–æ–ª—ñ—Ä —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞: –∑–µ–ª–µ–Ω–∏–π/–∂–æ–≤—Ç–∏–π/—á–µ—Ä–≤–æ–Ω–∏–π –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### –î–æ–¥–∞–Ω–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä GPU

**–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è:** –ú—ñ–∂ RAM —ñ Disk —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
```tsx
{node.gpu_usage !== undefined && (
  <div className="flex items-center gap-2">
    <Zap className="w-4 h-4 text-green-400" />
    <div className="flex-1">
      <div className="flex items-center justify-between mb-1">
        <span className="text-xs text-gray-400">GPU</span>
        <span className="text-xs font-medium text-white">{node.gpu_usage}%</span>
      </div>
      <div className="w-full bg-gray-700 rounded-full h-1.5">
        <div
          className={`h-1.5 rounded-full ${getStatusColor(node.gpu_usage)}`}
          style={{ width: `${node.gpu_usage}%` }}
        ></div>
      </div>
    </div>
  </div>
)}
```

**–Ü–∫–æ–Ω–∫–∞:** `Zap` (‚ö°) - –∑–µ–ª–µ–Ω–∞ (`text-green-400`)

---

## üìê –ü–æ—Ä—è–¥–æ–∫ –º–µ—Ç—Ä–∏–∫

### –ë—É–ª–æ:
1. üîµ CPU
2. üü£ RAM
3. üü† Disk
4. üåê Network

### –°—Ç–∞–ª–æ:
1. üîµ CPU
2. üü£ RAM
3. **üü¢ GPU** ‚Üê –ù–û–í–ò–ô!
4. üü† Disk
5. üåê Network

---

## üé® –ö–æ–ª—å–æ—Ä–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤

### –§—É–Ω–∫—Ü—ñ—è getStatusColor:

```typescript
const getStatusColor = (usage: number): string => {
  if (usage >= 90) return 'bg-red-500';      // üî¥ –ö—Ä–∏—Ç–∏—á–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  if (usage >= 70) return 'bg-orange-500';   // üü† –í–∏—Å–æ–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  if (usage >= 50) return 'bg-yellow-500';   // üü° –°–µ—Ä–µ–¥–Ω—î –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  return 'bg-green-500';                     // üü¢ –ù–æ—Ä–º–∞–ª—å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
};
```

### –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –¥–æ GPU:

- **0-49%**: üü¢ –ó–µ–ª–µ–Ω–∏–π (–Ω–æ—Ä–º–∞–ª—å–Ω–µ)
- **50-69%**: üü° –ñ–æ–≤—Ç–∏–π (—Å–µ—Ä–µ–¥–Ω—î)
- **70-89%**: üü† –û—Ä–∞–Ω–∂–µ–≤–∏–π (–≤–∏—Å–æ–∫–µ)
- **90-100%**: üî¥ –ß–µ—Ä–≤–æ–Ω–∏–π (–∫—Ä–∏—Ç–∏—á–Ω–µ)

---

## üîß –õ–æ–≥—ñ–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è

### –£–º–æ–≤–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:

```typescript
// GPU –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –¥–∞–Ω—ñ
{node.gpu_usage !== undefined && (
  // ... GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä
)}
```

**–¶–µ –æ–∑–Ω–∞—á–∞—î:**
- –Ø–∫—â–æ `gpu_usage` —î (–ù–û–î–ê1, –ù–û–î–ê2) ‚Üí **–ø–æ–∫–∞–∑–∞—Ç–∏** GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä
- –Ø–∫—â–æ `gpu_usage` –Ω–µ–º–∞—î (—ñ–Ω—à—ñ –Ω–æ–¥–∏) ‚Üí **–Ω–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏** GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä

---

## üìä –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –º–µ—Ç—Ä–∏–∫

### –ù–û–î–ê1 (Hetzner):

```typescript
if (node.id === 'node-1' || node.id === 'node-1-hetzner-gex44' || node.id.includes('hetzner')) {
  gpuUsage = Math.floor(Math.random() * 40) + 10; // 10-50%
}
```

**–†–µ–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:**
- –ú—ñ–Ω—ñ–º—É–º: 10% (idle, Ollama –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å)
- –ú–∞–∫—Å–∏–º—É–º: 50% (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç—É, inference)
- –ü—ñ–∫–∏: –¥–æ 90% (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö –º–æ–¥–µ–ª–µ–π)

### –ù–û–î–ê2 (MacBook M4 Max):

```typescript
if (node.id === 'node-2' || node.id === 'node-2-macbook-m4max' || node.id.includes('macbook')) {
  gpuUsage = Math.floor(Math.random() * 35) + 15; // 15-50%
}
```

**–†–µ–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:**
- –ú—ñ–Ω—ñ–º—É–º: 15% (idle –∑ Metal optimization)
- –ú–∞–∫—Å–∏–º—É–º: 50% (inference, Metal acceleration)
- –ü—ñ–∫–∏: –¥–æ 80% (–≤–µ–ª–∏–∫—ñ –º–æ–¥–µ–ª—ñ, —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è)

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –í—ñ–¥–∫—Ä–∏—Ç–∏ Monitor Agent

```
http://localhost:8899/dagi-monitor
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

**–ú–∞—î –±—É—Ç–∏:**
- –ù–û–î–ê1: ‚ö° GPU: 10-50% (–∑–µ–ª–µ–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä)
- –ù–û–î–ê2: ‚ö° GPU: 15-50% (–∑–µ–ª–µ–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä)

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

- –ú–µ—Ç—Ä–∏–∫–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
- GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–º—ñ–Ω—é—î –∫–æ–ª—ñ—Ä –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üì± Responsive –¥–∏–∑–∞–π–Ω

### Desktop:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ù–û–î–ê1 (Hetzner GEX44)             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîµ CPU:  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] 35%         ‚îÇ
‚îÇ üü£ RAM:  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 45%         ‚îÇ
‚îÇ ‚ö° GPU:  [‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 25%  ‚Üê NEW! ‚îÇ
‚îÇ üü† Disk: [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] 50%         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Mobile:
- GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–¥–∞–ø—Ç—É—î—Ç—å—Å—è –¥–æ —à–∏—Ä–∏–Ω–∏ –µ–∫—Ä–∞–Ω—É
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø–æ—Ä—è–¥–æ–∫: CPU ‚Üí RAM ‚Üí GPU ‚Üí Disk

---

## üîÑ –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### 1. –†–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –∑ API

**–ó–∞–º—ñ—Å—Ç—å:**
```typescript
gpuUsage = Math.floor(Math.random() * 40) + 10; // Mock
```

**–ù–∞:**
```typescript
// –ù–û–î–ê1: —á–µ—Ä–µ–∑ nvidia-smi
const gpuMetrics = await fetch('http://144.76.224.179:8899/api/gpu/metrics');

// –ù–û–î–ê2: —á–µ—Ä–µ–∑ Metal API
const gpuMetrics = await fetch('http://localhost:8899/api/gpu/metrics');
```

### 2. –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ

```tsx
<Tooltip>
  <TooltipTrigger>
    <Zap className="w-4 h-4 text-green-400" />
  </TooltipTrigger>
  <TooltipContent>
    <p>NVIDIA RTX 4000 SFF Ada</p>
    <p>VRAM: 15.2 GB / 20 GB (76%)</p>
    <p>Temp: 65¬∞C</p>
    <p>Power: 55W / 70W</p>
  </TooltipContent>
</Tooltip>
```

### 3. VRAM —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä

```tsx
<div className="flex items-center gap-2">
  <Zap className="w-4 h-4 text-green-400" />
  <div className="flex-1">
    <span className="text-xs text-gray-400">GPU / VRAM</span>
    <span className="text-xs font-medium text-white">
      {node.gpu_usage}% / {node.vram_usage}%
    </span>
  </div>
</div>
```

### 4. –Ü—Å—Ç–æ—Ä—ñ—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

- –ú—ñ–Ω—ñ-–≥—Ä–∞—Ñ—ñ–∫ GPU usage –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
- –ü—ñ–∫–∏ —Ç–∞ —Å–µ—Ä–µ–¥–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è

---

## ‚úÖ –ß–µ–∫–ª—ñ—Å—Ç

- [x] –î–æ–¥–∞–Ω–æ `gpu_usage` –¥–æ `NodeMetrics` interface
- [x] –î–æ–¥–∞–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é GPU –º–µ—Ç—Ä–∏–∫ –¥–ª—è –ù–û–î–ê1
- [x] –î–æ–¥–∞–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é GPU –º–µ—Ç—Ä–∏–∫ –¥–ª—è –ù–û–î–ê2
- [x] –î–æ–¥–∞–Ω–æ GPU —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ UI (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç Zap)
- [x] –î–æ–¥–∞–Ω–æ —É–º–æ–≤–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—è–∫—â–æ —î GPU)
- [x] –î–æ–¥–∞–Ω–æ –∫–æ–ª—å–æ—Ä–æ–≤—É —ñ–Ω–¥–∏–∫–∞—Ü—ñ—é (getStatusColor)
- [x] –†–æ–∑—Ç–∞—à–æ–≤–∞–Ω–æ –º—ñ–∂ RAM —ñ Disk
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ Desktop
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ Mobile
- [ ] –î–æ–¥–∞–Ω–æ —Ä–µ–∞–ª—å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –∑ API
- [ ] –î–æ–¥–∞–Ω–æ VRAM —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä
- [ ] –î–æ–¥–∞–Ω–æ —ñ—Å—Ç–æ—Ä—ñ—é –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –¢–µ–ø–µ—Ä –Ω–∞ `http://localhost:8899/dagi-monitor`:

**–ú–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥:**
- ‚úÖ CPU (—Å–∏–Ω—ñ–π)
- ‚úÖ RAM (—Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–π)
- ‚úÖ **GPU (–∑–µ–ª–µ–Ω–∏–π)** ‚Üê –ù–û–í–ò–ô!
- ‚úÖ Disk (–æ—Ä–∞–Ω–∂–µ–≤–∏–π)
- ‚úÖ Network (—Å–∏–Ω—ñ–π)

**GPU –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –¥–ª—è:**
- ‚úÖ –ù–û–î–ê1 (Hetzner GEX44) - NVIDIA RTX 4000
- ‚úÖ –ù–û–î–ê2 (MacBook M4 Max) - Apple M4 Max GPU

---

**–°–¢–ê–¢–£–°:** ‚úÖ –ì–û–¢–û–í–û!  
**–¢–µ—Å—Ç—É–π—Ç–µ:** `http://localhost:8899/dagi-monitor`

