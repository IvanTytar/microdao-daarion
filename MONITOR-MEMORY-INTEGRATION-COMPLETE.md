# ‚úÖ Monitor Agent Memory Integration - –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## üìä –°—Ç–∞—Ç—É—Å Monitor Agent

### –ù–û–î–ê1:
- ‚úÖ **–ó–∞–¥–µ–ø–ª–æ—î–Ω–æ:** `agent-monitor`
- **Node:** node-1-hetzner-gex44
- **Model:** `local_qwen3_8b`
- **Status:** `active`

### –ù–û–î–ê2:
- ‚úÖ **–î–æ–¥–∞–Ω–æ:** `agent-monitor-node2`
- **Node:** node-2
- **Model:** `local_qwen3_8b`
- **Status:** `active`

---

## üß† –ü–∞–º'—è—Ç—å Monitor Agent

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:
```
–ù–û–î–ê1 (Monitor Agent) ‚îÄ‚îÄ‚îê
                        ‚îÇ
–ù–û–î–ê2 (Monitor Agent) ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫ Memory Service (PostgreSQL)
                        ‚îÇ         ‚îú‚îÄ‚îÄ‚ñ∫ Qdrant (Vector)
–ù–û–î–ê3 (Monitor Agent) ‚îÄ‚îÄ‚îò         ‚îú‚îÄ‚îÄ‚ñ∫ Milvus (Long-range)
                                  ‚îî‚îÄ‚îÄ‚ñ∫ Neo4j (Graph)
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:
- ‚úÖ WebSocket –ø–æ–¥—ñ—ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ Memory Service
- ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó (10 –ø–æ–¥—ñ–π –∞–±–æ 5 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ PostgreSQL (—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ)
- ‚è≥ TODO: –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ Qdrant, Milvus, Neo4j

---

## üîß –°—Ç–≤–æ—Ä–µ–Ω–æ

### 1. API Endpoints –¥–ª—è Memory Service

**Endpoint:** `/api/memory/monitor-events/batch`
- –ë–∞—Ç—á –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–¥—ñ–π
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –∑–±–æ—Ä—É –º–µ—Ç—Ä–∏–∫ –∑ –±–∞–≥–∞—Ç—å–æ—Ö –Ω–æ–¥

**Endpoint:** `/api/memory/monitor-events/{node_id}`
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –æ–¥–Ω—ñ—î—ó –ø–æ–¥—ñ—ó

### 2. Frontend Integration

**–§–∞–π–ª:** `src/api/monitorMemory.ts`
- –ë–∞—Ç—á–∏–Ω–≥ –ø–æ–¥—ñ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑ WebSocket

**–§–∞–π–ª:** `src/hooks/useMonitorEvents.ts`
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Memory Service
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–¥—ñ–π

### 3. NodeAgent Integration

**NodeAgent (–°–µ—Ä–≤—ñ—Å):**
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ –ù–û–î–ò —è–∫ —Å–µ—Ä–≤—ñ—Å
- –ü–æ—Ä—Ç: 9600 (–ù–û–î–ê2)
- –†–æ–ª—å: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –Ω–æ–¥–∏

**Monitor Agent (–ê–≥–µ–Ω—Ç):**
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ –ù–û–î–ò —è–∫ –∞–≥–µ–Ω—Ç
- –ó–±–∏—Ä–∞—î –ø–æ–¥—ñ—ó —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏
- –ó–±–µ—Ä—ñ–≥–∞—î –≤ Memory Service

---

## üìù –Ø–∫ –ø—Ä–∞—Ü—é—î

### 1. –ó–±—ñ—Ä –ø–æ–¥—ñ–π:
- Monitor Agent –Ω–∞ –∫–æ–∂–Ω—ñ–π –ù–û–î–ê –∑–±–∏—Ä–∞—î –ø–æ–¥—ñ—ó
- –ü–æ–¥—ñ—ó –Ω–∞–¥—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ WebSocket `/ws/events`

### 2. –ë–∞—Ç—á–∏–Ω–≥:
- –ü–æ–¥—ñ—ó –Ω–∞–∫–æ–ø–∏—á—É—é—Ç—å—Å—è –≤ –±–∞—Ç—á (–¥–æ 10 –ø–æ–¥—ñ–π)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –±–∞–≥–∞—Ç—å–æ—Ö –Ω–æ–¥

### 3. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è:
- PostgreSQL: —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ
- Qdrant: –≤–µ–∫—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫ (TODO)
- Milvus: –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è (TODO)
- Neo4j: –≥—Ä–∞—Ñ–æ–≤—ñ –∑–≤'—è–∑–∫–∏ (TODO)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### NodeAgent vs Monitor Agent:

**NodeAgent:**
- Backend service (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä)
- –ù–ï –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ –∞–≥–µ–Ω—Ç
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ —Å–µ—Ä–≤—ñ—Å –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ –ù–û–î–ò

**Monitor Agent:**
- AI –∞–≥–µ–Ω—Ç (–∑ LLM)
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ –∞–≥–µ–Ω—Ç –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ –ù–û–î–ò
- –ß–∞—Ç –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º
- –ó–±—ñ—Ä —Ç–∞ –∞–Ω–∞–ª—ñ–∑ –ø–æ–¥—ñ–π

**–í–∏—Å–Ω–æ–≤–æ–∫:** –ù–µ –æ–±'—î–¥–Ω—É–≤–∞—Ç–∏! –¶–µ —Ä—ñ–∑–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
- NodeAgent = –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (—Å–µ—Ä–≤—ñ—Å)
- Monitor Agent = –∞–Ω–∞–ª—ñ—Ç–∏–∫ (–∞–≥–µ–Ω—Ç)

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ

- ‚úÖ Monitor Agent –Ω–∞ –ù–û–î–ê1 —Ç–∞ –ù–û–î–ê2
- ‚úÖ API endpoints –¥–ª—è Memory Service
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–¥—ñ–π
- ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- ‚úÖ NodeAgent –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ —Å–µ—Ä–≤—ñ—Å
- ‚úÖ Monitor Agent –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ –∞–≥–µ–Ω—Ç

---

**Status:** ‚úÖ Complete
**Date:** 2025-01-27

