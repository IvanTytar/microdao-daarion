# üìä –°—Ç–∞—Ç—É—Å –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ –Ω–∞ NODE1

**–î–∞—Ç–∞:** 2025-11-23  
**–ü–∏—Ç–∞–Ω–Ω—è:** –ß–∏ –ø—Ä–∞—Ü—é—é—Ç—å –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ –∑ –∫–æ–∂–Ω–∏–º –∞–≥–µ–Ω—Ç–æ–º –Ω–∞ NODE1?  
**–í—ñ–¥–ø–æ–≤—ñ–¥—å:** ‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û** - –ø–æ—Ç—Ä—ñ–±–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

---

## üéØ –ü–û–¢–û–ß–ù–ê –°–ò–¢–£–ê–¶–Ü–Ø

### ‚úÖ –©–æ –í–ñ–ï –ø—Ä–∞—Ü—é—î –Ω–∞ NODE1:

#### 1. **Router (9102)** - –ë–∞–∑–æ–≤–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è
- ‚úÖ Telegram –±–æ—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ (DAARWIZZ, Helion, GREENFOOD)
- ‚úÖ –í—Å—ñ 13 –∞–≥–µ–Ω—Ç—ñ–≤ NODE1 –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ Router
- ‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å
- ‚úÖ –ë–∞–∑–æ–≤–∏–π —á–∞—Ç –∑ –∞–≥–µ–Ω—Ç–∞–º–∏

**–ü–æ—Ç–æ—á–Ω–∏–π –∑–∞–ø–∏—Ç:**
```json
POST http://144.76.224.179:9102/route
{
  "agent": "helion",
  "message": "–ü—Ä–∏–≤—ñ—Ç!",
  "mode": "chat"
}
```

---

#### 2. **Telegram Gateway (9200)** - –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
**–§–∞–π–ª:** `telegram-infrastructure/telegram-gateway`

**–©–æ –ø—Ä–∞—Ü—é—î:**
- ‚úÖ Long polling —á–µ—Ä–µ–∑ Local Telegram Bot API (8081)
- ‚úÖ NATS event bus (`agent.telegram.update`)
- ‚úÖ 3 –∞–∫—Ç–∏–≤–Ω—ñ –±–æ—Ç–∏:
  - @DAARWIZZBot
  - @energyunionBot  
  - @greenfoodliveBot

**–ü–æ—Ç–æ—á–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- üìù –¢–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- üì∑ –§–æ—Ç–æ (–∞–ª–µ –Ω–µ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è!)
- üé§ –ì–æ–ª–æ—Å–æ–≤—ñ (–∞–ª–µ –Ω–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±—É—é—Ç—å—Å—è!)
- üìé –§–∞–π–ª–∏ (–∞–ª–µ –Ω–µ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è!)

---

#### 3. **–Ü—Å–Ω—É—é—á—ñ —Å–µ—Ä–≤—ñ—Å–∏ –Ω–∞ NODE1** (–∑ —ñ–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü—ñ—ó)
```bash
# STT Service (—Å—Ç–∞—Ä–∏–π)
http://dagi-stt:9000/stt  # —á–µ—Ä–µ–∑ docker network

# TTS Service
http://dagi-tts:9100/tts

# Parser Service
http://dagi-parser:9400

# Vision / Swapper
http://144.76.224.179:8890  # qwen3-vl:8b
```

---

### ‚ùå –©–æ –ù–ï –ø—Ä–∞—Ü—é—î (–ø–æ—Ç—Ä—ñ–±–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è):

#### 1. **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ (–ù–û–î–ê2)**
**–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è:** –ù–û–î–ê2 (192.168.1.244)

| –°–µ—Ä–≤—ñ—Å | –ü–æ—Ä—Ç | –°—Ç–∞—Ç—É—Å | –î–æ—Å—Ç—É–ø –∑ NODE1 |
|--------|------|--------|----------------|
| STT Service (–Ω–æ–≤–∏–π) | 8895 | ‚úÖ –ì–æ—Ç–æ–≤–∏–π | ‚ùå –ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ |
| OCR Service | 8896 | ‚úÖ –ì–æ—Ç–æ–≤–∏–π | ‚ùå –ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ |
| Web Search | 8897 | ‚úÖ –ì–æ—Ç–æ–≤–∏–π | ‚ùå –ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ |
| Vector DB | 8898 | ‚úÖ –ì–æ—Ç–æ–≤–∏–π | ‚ùå –ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ |

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤—ñ—Å–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ, –∞–ª–µ –Ω–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –∑ Router –Ω–∞ NODE1!

---

#### 2. **Router Multimodal Support**
**–§–∞–π–ª:** `services/router-multimodal/router_multimodal.py`

**–°—Ç–∞—Ç—É—Å:** üìù –ö–æ–¥ –≥–æ—Ç–æ–≤–∏–π, –∞–ª–µ –ù–ï —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π!

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- [ ] –î–æ–¥–∞—Ç–∏ `process_images()` –≤ Router
- [ ] –î–æ–¥–∞—Ç–∏ `process_files()` –≤ Router
- [ ] –û–Ω–æ–≤–∏—Ç–∏ `/route` endpoint
- [ ] –î–æ–¥–∞—Ç–∏ Vision agents –º–∞–ø–ø—ñ–Ω–≥

---

## ü§î –í–Ü–î–ü–û–í–Ü–î–¨ –ù–ê –ü–ò–¢–ê–ù–ù–Ø

### –ß–∏ –ø—Ä–∞—Ü—é—é—Ç—å –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ –∑ –∞–≥–µ–Ω—Ç–∞–º–∏ NODE1?

**–ö–æ—Ä–æ—Ç–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:** ‚ùå **–ù–Ü**, –ø–æ–∫–∏ —â–æ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å.

**–î–µ—Ç–∞–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

#### üìù **–¢–µ–∫—Å—Ç–æ–≤–∏–π —á–∞—Ç:**
‚úÖ **–¢–ê–ö** - –ø—Ä–∞—Ü—é—î –¥–ª—è –≤—Å—ñ—Ö –∞–≥–µ–Ω—Ç—ñ–≤ —á–µ—Ä–µ–∑:
- Frontend —á–∞—Ç (`http://localhost:8899`)
- Telegram –±–æ—Ç–∏ (@DAARWIZZBot, @energyunionBot, @greenfoodliveBot)
- Router API (`http://144.76.224.179:9102/route`)

---

#### üé§ **–ì–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (Voice ‚Üí Text):**
‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û**

**Telegram –±–æ—Ç–∏:**
- ‚ùå **–ù–ï —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±—É—é—Ç—å—Å—è** - –≥–æ–ª–æ—Å –Ω–∞–¥—Ö–æ–¥–∏—Ç—å, –∞–ª–µ –Ω–µ –∫–æ–Ω–≤–µ—Ä—Ç—É—î—Ç—å—Å—è –≤ —Ç–µ–∫—Å—Ç
- –Ü—Å–Ω—É—î —Å—Ç–∞—Ä–∏–π STT –Ω–∞ NODE1 (`dagi-stt:9000`), –∞–ª–µ –≤—ñ–Ω –Ω–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π –∑ Telegram Gateway

**Frontend —á–∞—Ç:**
- ‚úÖ **–ó–∞–ø–∏—Å –ø—Ä–∞—Ü—é—î** (Web Audio API)
- ‚ùå **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è –ù–ï –ø—Ä–∞—Ü—é—î** - –Ω–æ–≤–∏–π STT Service (–ù–û–î–ê2:8895) –≥–æ—Ç–æ–≤–∏–π, –∞–ª–µ –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
1. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ STT Service (–ù–û–î–ê2:8895) –∑ Telegram Gateway
2. –î–æ–¥–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—é –≥–æ–ª–æ—Å–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

---

#### üì∑ **–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è (Image ‚Üí Analysis):**
‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û**

**Telegram –±–æ—Ç–∏:**
- ‚úÖ –ú–æ–∂—É—Ç—å **–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏** —Ñ–æ—Ç–æ
- ‚ùå **–ù–ï –æ–±—Ä–æ–±–ª—è—é—Ç—å** - –ø–æ—Ç—Ä—ñ–±–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Vision agents

**Frontend —á–∞—Ç:**
- ‚úÖ **Upload –ø—Ä–∞—Ü—é—î** (Enhanced Chat)
- ‚ùå **Vision –∞–Ω–∞–ª—ñ–∑ –ù–ï –ø—Ä–∞—Ü—é—î** - Router –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î `payload.context.images`

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
1. –û–Ω–æ–≤–∏—Ç–∏ Router –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ `images` –≤ payload
2. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ Vision agents (Sofia grok-4.1, Spectra qwen3-vl)
3. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ Telegram Gateway

---

#### üìé **–§–∞–π–ª–∏ (Document ‚Üí Extract Text):**
‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û**

**Telegram –±–æ—Ç–∏:**
- ‚úÖ –ú–æ–∂—É—Ç—å **–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏** –¥–æ–∫—É–º–µ–Ω—Ç–∏
- ‚ö†Ô∏è **Parser Service —ñ—Å–Ω—É—î** (`dagi-parser:9400`), –∞–ª–µ –æ–±–º–µ–∂–µ–Ω–∏–π
- ‚ùå **OCR –ù–ï –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π** –¥–ª—è —Å–∫–∞–Ω—ñ–≤/–∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ —Ç–µ–∫—Å—Ç–æ–º

**Frontend —á–∞—Ç:**
- ‚úÖ **Upload –ø—Ä–∞—Ü—é—î** (Enhanced Chat)
- ‚ùå **OCR –ù–ï –ø—Ä–∞—Ü—é—î** - OCR Service (–ù–û–î–ê2:8896) –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
1. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ OCR Service –¥–ª—è –≤–∏—Ç—è–≥—É —Ç–µ–∫—Å—Ç—É –∑ –∑–æ–±—Ä–∞–∂–µ–Ω—å
2. –†–æ–∑—à–∏—Ä–∏—Ç–∏ Parser Service –¥–ª—è –±—ñ–ª—å—à–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ñ–æ—Ä–º–∞—Ç—ñ–≤
3. –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É `files` –≤ Router payload

---

#### üåê **–í–µ–±-–ø–æ—à—É–∫ (Web Search):**
‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û**

**Router:**
- ‚úÖ –Ü—Å–Ω—É—î `mode=web_search` –≤ Router
- ‚ùå –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–æ–≤–∏–π Web Search Service (–ù–û–î–ê2:8897)

**Frontend —á–∞—Ç:**
- ‚úÖ **UI –∫–Ω–æ–ø–∫–∞ —î** (Enhanced Chat)
- ‚ùå **–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞** –¥–æ Web Search Service

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
1. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ Web Search Service –≤ Router
2. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –¥–æ Telegram Gateway
3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –≤ Frontend

---

#### üìö **Knowledge Base (Vector DB):**
‚ùå **–ù–Ü** - –∑–æ–≤—Å—ñ–º –Ω–µ –ø—Ä–∞—Ü—é—î

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ Vector DB Service –≥–æ—Ç–æ–≤–∏–π (–ù–û–î–ê2:8898)
- ‚úÖ Frontend UI –≥–æ—Ç–æ–≤–∏–π (Knowledge Base –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
- ‚ùå **–ù–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π** –∑ –∂–æ–¥–Ω–∏–º –∞–≥–µ–Ω—Ç–æ–º
- ‚ùå **RAG –Ω–µ –ø—Ä–∞—Ü—é—î**

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
1. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ Vector DB –¥–æ Router
2. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ RAG (Retrieval-Augmented Generation)
3. –î–æ–¥–∞—Ç–∏ API –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

---

## üîß –©–û –ü–û–¢–†–Ü–ë–ù–û –ó–†–û–ë–ò–¢–ò

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Router Multimodal

**–§–∞–π–ª–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:**
```bash
# NODE1
/opt/microdao-daarion/router/main.py
/opt/microdao-daarion/router/router-config-final.yml
```

**–ö–æ–¥ –≥–æ—Ç–æ–≤–∏–π:** `services/router-multimodal/router_multimodal.py`

**–ó–º—ñ–Ω–∏:**
1. –î–æ–¥–∞—Ç–∏ `process_images()` —Ñ—É–Ω–∫—Ü—ñ—é
2. –î–æ–¥–∞—Ç–∏ `process_files()` —Ñ—É–Ω–∫—Ü—ñ—é
3. –û–Ω–æ–≤–∏—Ç–∏ `/route` endpoint –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ `payload.context.images` —Ç–∞ `payload.context.files`
4. –î–æ–¥–∞—Ç–∏ Vision agents –º–∞–ø–ø—ñ–Ω–≥ (Sofia, Spectra)

**–ß–∞—Å:** ~2-3 –≥–æ–¥–∏–Ω–∏

---

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Telegram Gateway –∑ –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∏–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏

**–§–∞–π–ª –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:**
```bash
telegram-infrastructure/telegram-gateway/app/main.py
```

**–ó–º—ñ–Ω–∏:**
1. –ü—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Üí –≤–∏–∫–ª–∏–∫–∞—Ç–∏ STT Service (–ù–û–î–ê2:8895)
2. –ü—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ —Ñ–æ—Ç–æ ‚Üí –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤ Router –∑ `images` payload
3. –ü—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚Üí –≤–∏–∫–ª–∏–∫–∞—Ç–∏ OCR/Parser
4. –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –≤–µ–±-–ø–æ—à—É–∫—É —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–∏

**–ß–∞—Å:** ~3-4 –≥–æ–¥–∏–Ω–∏

---

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Frontend –∑ –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∏–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏

**–§–∞–π–ª–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:**
```
src/components/microdao/MicroDaoOrchestratorChatEnhanced.tsx
src/components/microdao/chat/MultimodalInput.tsx
```

**–ó–º—ñ–Ω–∏:**
1. ‚úÖ STT –≤–∂–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π
2. –î–æ–¥–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ OCR Service –ø—Ä–∏ upload –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ —Ç–µ–∫—Å—Ç–æ–º
3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ Web Search Service
4. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ Vector DB –¥–ª—è Knowledge Base

**–ß–∞—Å:** ~2 –≥–æ–¥–∏–Ω–∏

---

## üìä –ü–Ü–î–°–£–ú–û–ö

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ:

| –§—É–Ω–∫—Ü—ñ—è | Frontend | Telegram | Router | –°—Ç–∞—Ç—É—Å |
|---------|----------|----------|--------|--------|
| üìù –¢–µ–∫—Å—Ç | ‚úÖ | ‚úÖ | ‚úÖ | **–ü–†–ê–¶–Æ–Ñ** |
| üé§ –ì–æ–ª–æ—Å ‚Üí –¢–µ–∫—Å—Ç | ‚ö†Ô∏è | ‚ùå | ‚ùå | **–ß–ê–°–¢–ö–û–í–û** |
| üì∑ –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Üí Vision | ‚ùå | ‚ùå | ‚ùå | **–ù–ï –ü–†–ê–¶–Æ–Ñ** |
| üì∑ –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Üí OCR | ‚ùå | ‚ùå | ‚ùå | **–ù–ï –ü–†–ê–¶–Æ–Ñ** |
| üìé –î–æ–∫—É–º–µ–Ω—Ç–∏ | ‚ö†Ô∏è | ‚ö†Ô∏è | ‚ö†Ô∏è | **–ß–ê–°–¢–ö–û–í–û** |
| üåê –í–µ–±-–ø–æ—à—É–∫ | ‚ùå | ‚ùå | ‚ö†Ô∏è | **–ù–ï –ü–†–ê–¶–Æ–Ñ** |
| üìö Knowledge Base | ‚ùå | ‚ùå | ‚ùå | **–ù–ï –ü–†–ê–¶–Æ–Ñ** |

---

### –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è:

**"–ù–∞ –ù–û–î–ê1 –≤—Å—ñ –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑ –∫–æ–∂–Ω–∏–º –∞–≥–µ–Ω—Ç–æ–º —è–∫–∏–π –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ —á–∞—Ç—É –∞–±–æ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞?"**

‚ùå **–ù–Ü**, –Ω–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç:

1. **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ** (STT, OCR, Web Search, Vector DB) –Ω–∞ –ù–û–î–ê2
2. **Frontend UI –≥–æ—Ç–æ–≤–∏–π** (Enhanced Chat –∑ –∫–Ω–æ–ø–∫–∞–º–∏)
3. **Router –ù–ï –ø—ñ–¥—Ç—Ä–∏–º—É—î** multimodal payload
4. **Telegram –±–æ—Ç–∏ –ù–ï –æ–±—Ä–æ–±–ª—è—é—Ç—å** –≥–æ–ª–æ—Å/—Ñ–æ—Ç–æ/—Ñ–∞–π–ª–∏ —á–µ—Ä–µ–∑ –Ω–æ–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏
5. **–ê–≥–µ–Ω—Ç–∏ –æ—Ç—Ä–∏–º—É—é—Ç—å** —Ç—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

---

### –©–æ–± –∑–∞–ø—Ä–∞—Ü—é–≤–∞–ª–æ:

**–ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫—Ä–æ–∫–∏:**

1. **–Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ Router Multimodal** (NODE1)
   - –ß–∞—Å: ~2-3 –≥–æ–¥–∏–Ω–∏
   - –§–∞–π–ª: `router/main.py`
   - –ö–æ–¥ –≥–æ—Ç–æ–≤–∏–π: `services/router-multimodal/router_multimodal.py`

2. **–û–Ω–æ–≤–∏—Ç–∏ Telegram Gateway** (NODE1)
   - –ß–∞—Å: ~3-4 –≥–æ–¥–∏–Ω–∏
   - –§–∞–π–ª: `telegram-gateway/app/main.py`
   - –î–æ–¥–∞—Ç–∏ –≤–∏–∫–ª–∏–∫–∏ STT/OCR/Parser

3. **–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–µ—Ä–µ–∂–µ–≤–µ –∑'—î–¥–Ω–∞–Ω–Ω—è** –ù–û–î–ê2 ‚Üí NODE1
   - –ß–∞—Å: ~1 –≥–æ–¥–∏–Ω–∞
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ—Ä—Ç–∏: 8895, 8896, 8897, 8898
   - –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ firewall/SSH —Ç—É–Ω–µ–ª—ñ

**–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å:** ~7-9 –≥–æ–¥–∏–Ω —Ä–æ–±–æ—Ç–∏

---

## üöÄ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (—Ç—ñ–ª—å–∫–∏ STT –¥–ª—è –≥–æ–ª–æ—Å—É)

```bash
# 1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ—Ä—Ç STT Service –Ω–∞ –ù–û–î–ê2
ssh apple@192.168.1.244
sudo ufw allow 8895/tcp

# 2. –û–Ω–æ–≤–∏—Ç–∏ Telegram Gateway –Ω–∞ NODE1
ssh root@144.76.224.179
cd /opt/microdao-daarion/telegram-gateway

# –î–æ–¥–∞—Ç–∏ –≤ app/main.py:
# async def transcribe_voice(file_id: str) -> str:
#     # Download voice from Telegram
#     # Send to –ù–û–î–ê2:8895/api/stt
#     # Return transcribed text
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Telegram ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—é—Ç—å—Å—è –≤ —Ç–µ–∫—Å—Ç ‚Üí –∞–≥–µ–Ω—Ç –æ—Ç—Ä–∏–º—É—î —Ç–µ–∫—Å—Ç

**–ß–∞—Å:** ~1-2 –≥–æ–¥–∏–Ω–∏

---

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (–≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏)

1. –î–µ–ø–ª–æ–π –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ –Ω–∞ –ù–û–î–ê2
2. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Router Multimodal
3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è Telegram Gateway
4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–µ—Ä–µ–∂—ñ
5. End-to-end —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**–ß–∞—Å:** ~7-9 –≥–æ–¥–∏–Ω

---

## üìû –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á

### –î–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É:

1. **–ü–æ—á–∞—Ç–∏ –∑ STT** (–≥–æ–ª–æ—Å–æ–≤—ñ ‚Üí —Ç–µ–∫—Å—Ç)
   - –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
   - –í–µ–ª–∏–∫–∏–π –µ—Ñ–µ–∫—Ç –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - 1-2 –≥–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏

2. **–ü–æ—Ç—ñ–º Vision** (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Üí –∞–Ω–∞–ª—ñ–∑)
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Sofia/Spectra
   - Router Multimodal
   - 3-4 –≥–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏

3. **–û—Å—Ç–∞–Ω–Ω—ñ–º OCR + Web Search**
   - –ú–µ–Ω—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
   - –ú–æ–∂–µ –ø–æ—á–µ–∫–∞—Ç–∏

---

**–í–ò–°–ù–û–í–û–ö:** –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ **—Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∞ –≥–æ—Ç–æ–≤—ñ**, –∞–ª–µ **–Ω–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ** –∑ –∞–≥–µ–Ω—Ç–∞–º–∏. –ü–æ—Ç—Ä—ñ–±–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Router + Telegram Gateway –¥–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ.

**–°—Ç–∞—Ç—É—Å:** üü° **–ì–û–¢–û–í–û –î–û –Ü–ù–¢–ï–ì–†–ê–¶–Ü–á** (–∫–æ–¥ —î, –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–µ–ø–ª–æ–π)

