# üì° Node #2 ‚Äî Telegram –±–æ—Ç-–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ (23.11.2025)

**–ú–µ—Ç–∞:** –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ Telegram –±–æ—Ç–∏, –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω—ñ –¥–æ –∞–≥–µ–Ω—Ç—ñ–≤ –ù–û–î–ê2, –∑–∞—Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ —Å—Ç–∞–Ω —Å–µ—Ä–≤—ñ—Å—ñ–≤ (STT, TTS, Parser, Web Search, Vision) —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ –∫–æ–∂–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É.

---

## 1. –ó–≤–µ–¥–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –±–æ—Ç—ñ–≤

| # | –ê–≥–µ–Ω—Ç / –ë–æ—Ç | Username | Token prefix | –ù–æ–¥–∞ / –ú–æ–¥–µ–ª—å | –°—Ç–∞—Ç—É—Å –¥–æ —Ñ—ñ–∫—Å—É | –°—Ç–∞—Ç—É—Å –ø—ñ—Å–ª—è —Ñ—ñ–∫—Å—É | –ö–æ–º–µ–Ω—Ç–∞—Ä |
|---|-------------|----------|--------------|---------------|-----------------|--------------------|----------|
| 1 | DAARWIZZ | @DAARWIZZBot | 83234123 | Node1/Node2 ¬∑ qwen3:8b | –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î | ‚úÖ –∞–∫—Ç–∏–≤–Ω–∏–π | –ê–≤—Ç–æ—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è + polling |
| 2 | Helion | @HelionEnergyBot | 81120625 | Node1/Node2 ¬∑ qwen3:8b | –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î | ‚úÖ –∞–∫—Ç–∏–≤–Ω–∏–π | system_prompt + STT/TTS |
| 3 | GREENFOOD | @greenfoodliveBot | 74951653 | Node1 ¬∑ qwen3:8b | –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π | ‚úÖ –∞–∫—Ç–∏–≤–Ω–∏–π | –î–æ–¥–∞–Ω–æ —É bots.yaml |
| 4 | CLAN | @clan_bot | 85168721 | Node2 ¬∑ DeepSeek | —Ç–æ–∫–µ–Ω –≤—ñ–¥—Å—É—Ç–Ω—ñ–π | ‚è≥ —á–µ–∫–∞—î —Ç–æ–∫–µ–Ω | –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤–∏–π BotFather —Ç–æ–∫–µ–Ω |
| 5 | Soul | @soul_bot | 80415964 | Node2 ¬∑ qwen3:8b | —Ç–æ–∫–µ–Ω –Ω–µ –≤–Ω–µ—Å–µ–Ω–æ | ‚è≥ —á–µ–∫–∞—î —Ç–æ–∫–µ–Ω | Ready –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è |
| 6 | DRUID | @druid_bot | 81456184 | Node2 ¬∑ qwen3:8b | —Ç–æ–∫–µ–Ω –Ω–µ –≤–Ω–µ—Å–µ–Ω–æ | ‚è≥ —á–µ–∫–∞—î —Ç–æ–∫–µ–Ω | –¢–æ–π —Å–∞–º–∏–π gateway |
| 7 | EONARCH | @eonarch_bot | 79623915 | Node2 ¬∑ DeepSeek | —Ç–æ–∫–µ–Ω –Ω–µ –≤–Ω–µ—Å–µ–Ω–æ | ‚è≥ —á–µ–∫–∞—î —Ç–æ–∫–µ–Ω | DeepSeek –º–æ–¥–µ–ª—å |
| 8 | –Ø—Ä–æ–º–∏—Ä | @yaromir_bot | 81281806 | Node2 ¬∑ qwen3:8b / DeepSeek | —Ç–æ–∫–µ–Ω –Ω–µ –≤–Ω–µ—Å–µ–Ω–æ | ‚è≥ —á–µ–∫–∞—î —Ç–æ–∫–µ–Ω | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î CrewAI |
| 9 | NUTRA | ‚Äî | PLACEHOLDER | Node2 ¬∑ qwen3:8b | —Ç–æ–∫–µ–Ω –≤—ñ–¥—Å—É—Ç–Ω—ñ–π | üî¥ –ø–æ—Ç—Ä—ñ–±–µ–Ω –±–æ—Ç | –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ |
| 10 | Dario | Discord | ‚Äî | Node2 ¬∑ qwen3:8b | Discord only | üîÑ –ø—Ä–æ–≥—Ä–µ—Å | –ü–æ–∑–∞ Telegram |

> ‚úÖ ‚Äì –±–æ—Ç –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π —É `telegram-gateway`, polling –∞–∫—Ç–∏–≤–Ω–∏–π.  
> ‚è≥ ‚Äì gateway –≥–æ—Ç–æ–≤–∏–π, –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ç—ñ–ª—å–∫–∏ —Ç–æ–∫–µ–Ω.  
> üî¥ ‚Äì –Ω–µ–º–∞—î –Ω—ñ —Ç–æ–∫–µ–Ω–∞, –Ω—ñ –±–æ—Ç–∞.

---

## 2. –°–µ—Ä–≤—ñ—Å–∏, —â–æ –∑–∞–¥—ñ—è–Ω—ñ

| –°–µ—Ä–≤—ñ—Å | URL (Node1) | –û–ø–∏—Å | –°—Ç–∞—Ç—É—Å |
|--------|-------------|------|--------|
| Local Telegram Bot API | `http://144.76.224.179:8081` | –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Telegram API (long polling) | ‚úÖ |
| telegram-gateway | `http://144.76.224.179:8000` | FastAPI, multi-bot, NATS | ‚úÖ |
| NATS | `nats://144.76.224.179:4222` | —á–µ—Ä–≥–∞ `agent.telegram.update` | ‚úÖ |
| DAGI Router | `http://144.76.224.179:9102` | –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è –¥–æ LLM | ‚úÖ |
| STT Service | `http://dagi-stt:9000/stt` | —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è voice/audio | ‚úÖ (—á–µ—Ä–µ–∑ docker network) |
| TTS Service | `http://dagi-tts:9100/tts` | –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≥–æ–ª–æ—Å–æ–º | ‚úÖ |
| Parser Service | `http://dagi-parser:9400` | PDF / DOC | ‚úÖ |
| Vision / Swapper | `http://144.76.224.179:8890` | qwen3-vl:8b (vision) | ‚úÖ |
| Web Search bridge | Router `mode=web_search` | –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø–∏—Ç–∞—Ö | ‚úÖ |

---

## 3. –©–æ —Å–∞–º–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–ê–≤—Ç–æ—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç—ñ–≤**
   - –î–æ–¥–∞–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è `bots.yaml` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ (`app/main.py`).
   - Gateway –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î polling –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –±–æ—Ç–∞.

2. **–ü–æ–≤–Ω–∏–π Telegram listener**
   - `telegram_listener.py` –æ—Ç—Ä–∏–º–∞–≤ –ø—ñ–¥—Ç—Ä–∏–º–∫—É:
     - —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö, –≥–æ–ª–æ—Å–æ–≤–∏—Ö, –∞—É–¥—ñ–æ, video-note –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å;
     - —Ñ–æ—Ç–æ –∑ –ø–µ—Ä–µ–¥–∞—á–æ—é `file_url`;
     - PDF –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ (parser);
     - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π STT (–¥–æ 60 —Å–µ–∫—É–Ω–¥, `handle_voice_message`);
     - metadata ‚Üí Router –¥–ª—è Vision/Parser.

3. **STT / TTS / Parser –º–∞—Ä—à—Ä—É—Ç**
   - –ü–æ–¥—ñ—ó –∑ `metadata` –æ–±—Ä–æ–±–ª—è—î `router_handler`:
     - `_handle_photo` ‚Üí vision —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç;
     - `_handle_document` ‚Üí parser + –∫–æ–Ω—Ç–µ–∫—Å—Ç;
     - `_text_to_speech` ‚Üí –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≥–æ–ª–æ—Å–æ–º.

4. **–ù–æ–≤—ñ API –≤ telegram-gateway**
   - `GET /bots/status/{agent_id}` ‚Äì –¥–ª—è UI;
   - `DELETE /bots/{agent_id}` ‚Äì –≤—ñ–¥ º—î–¥–Ω–∞—Ç–∏ –±–æ—Ç–∞;
   - CORS –¥–æ–∑–≤–æ–ª—è—î –∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –∑ `http://localhost:8899`;
   - –ø–æ–¥—ñ—è `bot.unregistered` —É NATS.

5. **UI –º–æ–¥—É–ª—å "–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Telegram –±–æ—Ç–∞"**
   - –£ –∫–∞–±—ñ–Ω–µ—Ç—ñ –∫–æ–∂–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ (`/agent/:agentId`) –Ω–æ–≤–∏–π –±–ª–æ–∫:
     - –ø–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç—É—Å (registered/polling);
     - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω –≤—ñ–¥ @BotFather;
     - –≤—ñ–¥ º—î–¥–Ω–∞–Ω–Ω—è –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º;
     - –∞–≤—Ç–æ-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–∞–∑ –Ω–∞ 20 —Å–µ–∫—É–Ω–¥.

---

## 4. –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏

1. **–î–µ–ø–ª–æ–π gateway**
   ```bash
   cd telegram-infrastructure
   docker compose up -d --build telegram-gateway
   ```
2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ health**
   ```bash
   curl -s http://localhost:8000/healthz
   ```
3. **–°–ø–∏—Å–æ–∫ –±–æ—Ç—ñ–≤**
   ```bash
   curl -s http://localhost:8000/bots/list | jq
   ```
4. **–°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞**
   ```bash
   curl -s http://localhost:8000/bots/status/helion | jq
   ```
5. **UI**
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:8899/agent/helion`
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –º–æ–¥—É–ª—å **"–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Telegram –±–æ—Ç–∞"**

---

## 5. –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ–∫–µ–Ω–∏** –¥–ª—è CLAN, Soul, DRUID, EONARCH, –Ø—Ä–æ–º–∏—Ä, NUTRA.
2. **–î–æ–¥–∞—Ç–∏ secrets –¥–æ `telegram-gateway/bots.yaml`** —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å.
3. **–†–æ–∑—à–∏—Ä–∏—Ç–∏ router-config** (LLM –ø—Ä–æ—Ñ—ñ–ª—ñ) –¥–ª—è –Ω–æ–≤–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤, —â–æ–±–∏ –≤–æ–Ω–∏ –æ—Ç—Ä–∏–º—É–≤–∞–ª–∏ –≤–ª–∞—Å–Ω–∏–π `system_prompt`.
4. **–ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —à–∞–±–ª–æ–Ω–∏ –ø—Ä–æ–º–ø—Ç—ñ–≤** —É `docs/prompts/telegram/`.

---

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –±–æ—Ç–∏ –ù–û–î–ê2 –º–æ–∂—É—Ç—å –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç, –≥–æ–ª–æ—Å, —Ñ–æ—Ç–æ, PDF, –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤–µ–±-–ø–æ—à—É–∫ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –≥–æ–ª–æ—Å–æ–º. UI –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∏–π —É –∫–æ–∂–Ω–æ–º—É –∞–≥–µ–Ω—Ç—Å—å–∫–æ–º—É –∫–∞–±—ñ–Ω–µ—Ç—ñ.

