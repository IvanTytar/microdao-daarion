# ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è default_model –¥–ª—è –ù–û–î–ê2

**–î–∞—Ç–∞:** 2025-11-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞

---

## üéØ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è –ù–û–î–ê2

**–§–∞–π–ª:** `services/swapper-service/config/swapper_config_node2.yaml`

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –ù–û–î–ê2 (MacBook M4 Max):**
- ‚úÖ `metal_acceleration: true` - Apple Silicon GPU acceleration
- ‚úÖ `default_model: gpt-oss:latest` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- ‚úÖ `ollama.url: http://localhost:11434` - Native Ollama (–Ω–µ —á–µ—Ä–µ–∑ Docker)
- ‚úÖ 8 –º–æ–¥–µ–ª–µ–π –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ (–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—Ö –Ω–∞ –ù–û–î–ê2)

**–ú–æ–¥–µ–ª—ñ –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:**
1. `gpt-oss:latest` (13 GB, 20.9B) - **default_model** - –æ—Å–Ω–æ–≤–Ω–∞ –º–æ–¥–µ–ª—å
2. `phi3:latest` (2.2 GB, 3.8B) - –ª–µ–≥–∫–∞ –º–æ–¥–µ–ª—å
3. `qwen3-vl:latest` (6.1 GB, 8.8B) - vision –º–æ–¥–µ–ª—å
4. `starcoder2:latest` (1.7 GB, 3B) - code specialist
5. `qwen2.5-coder:latest` (4.7 GB, 7.6B) - advanced code
6. `gemma2:latest` (5.4 GB, 9.2B) - reasoning
7. `mistral-nemo:latest` (7.1 GB, 12.2B) - advanced reasoning
8. `deepseek-r1:latest` (5.2 GB, 8.2B) - strategic reasoning

### 2. –õ–æ–≥—ñ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

**–§–∞–π–ª:** `services/swapper-service/app/main.py`

- –ü—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Swapper Service –ø–µ—Ä–µ–≤—ñ—Ä—è—î `default_model` –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –Ø–∫—â–æ –≤–∫–∞–∑–∞–Ω–æ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –º–æ–¥–µ–ª—å
- –õ–æ–≥—É—î –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üìã –Ø–∫ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –Ω–∞ –ù–û–î–ê2

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–∞—Ü—é—î Swapper Service
cd /Users/apple/github-projects/microdao-daarion
docker-compose ps swapper-service

# 2. –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è volume mount)
# –ê–±–æ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
cp services/swapper-service/config/swapper_config_node2.yaml \
   services/swapper-service/config/swapper_config.yaml

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Swapper Service
docker-compose restart swapper-service

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
docker-compose logs swapper-service --tail 30
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker)

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é Swapper Service
cd /Users/apple/github-projects/microdao-daarion/services/swapper-service

# 2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–º—ñ–Ω–Ω—É –æ—Ç–æ—á–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
export SWAPPER_CONFIG_PATH=./config/swapper_config_node2.yaml
export OLLAMA_BASE_URL=http://localhost:11434
export SWAPPER_MODE=single-active

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8890

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ (—à—É–∫–∞—Ç–∏ "default model")
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –û–Ω–æ–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ docker-compose (—è–∫—â–æ –∫–æ–Ω—Ñ—ñ–≥ –º–æ–Ω—Ç—É—î—Ç—å—Å—è)

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ docker-compose.yml
# –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ volume –º–æ–Ω—Ç—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:
# volumes:
#   - ./services/swapper-service/config:/app/config:ro

# 2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –ù–û–î–ê2
cp services/swapper-service/config/swapper_config_node2.yaml \
   services/swapper-service/config/swapper_config.yaml

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
docker-compose restart swapper-service

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
docker-compose logs swapper-service --tail 30 | grep -i "default\|gpt-oss"
```

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∞—Å—å –º–æ–¥–µ–ª—å

```bash
# –ù–∞ –ù–û–î–ê2
curl http://localhost:8890/status | jq
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "status": "healthy",
  "active_model": "gpt-oss:latest",
  "available_models": ["gpt-oss:latest", "phi3:latest", ...],
  "loaded_models": ["gpt-oss:latest"],
  "mode": "single-active",
  "total_models": 8
}
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ –ù–û–î–ê2

–í—ñ–¥–∫—Ä–∏—Ç–∏: `http://localhost:8899/nodes/node-2-macbook-m4max`

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Swapper Service –ø–æ–∫–∞–∑—É—î –∞–∫—Ç–∏–≤–Ω—É –º–æ–¥–µ–ª—å: `gpt-oss:latest`
- –°—Ç–∞—Ç—É—Å –º–æ–¥–µ–ª—ñ: `loaded` –∞–±–æ `active`
- GPU –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: Apple Silicon Metal acceleration

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏

```bash
# –Ø–∫—â–æ —á–µ—Ä–µ–∑ Docker
docker-compose logs swapper-service | grep -i "default\|gpt-oss"

# –Ø–∫—â–æ –ª–æ–∫–∞–ª—å–Ω–æ
# –õ–æ–≥–∏ –±—É–¥—É—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—ñ, —à—É–∫–∞—Ç–∏:
# üîÑ Loading default model: gpt-oss:latest
# ‚úÖ Default model loaded: gpt-oss:latest
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∑–º—ñ–Ω:
- ‚ùå –í—Å—ñ –º–æ–¥–µ–ª—ñ `UNLOADED` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- ‚ùå –ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç –ø–æ–≤—ñ–ª—å–Ω–∏–π (~10-30 —Å–µ–∫ –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)
- ‚úÖ –ï–∫–æ–Ω–æ–º—ñ—è –ø–∞–º'—è—Ç—ñ (0 GB –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ)

### –ü—ñ—Å–ª—è –∑–º—ñ–Ω:
- ‚úÖ `gpt-oss:latest` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- ‚úÖ –®–≤–∏–¥–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç (~1-2 —Å–µ–∫)
- ‚ö†Ô∏è –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ: ~13 GB (–ø—Ä–∏–π–Ω—è—Ç–Ω–æ –¥–ª—è 64GB RAM)

---

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏

1. **–®–≤–∏–¥–∫—ñ—Å—Ç—å:**
   - –ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç –≤—ñ–¥—Ä–∞–∑—É –ø—Ä–∞—Ü—é—î
   - –ù–µ–º–∞—î –∑–∞—Ç—Ä–∏–º–∫–∏ –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ

2. **–ó—Ä—É—á–Ω—ñ—Å—Ç—å:**
   - –ú–æ–¥–µ–ª—å –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è —Å—Ç–∞—Ä—Ç—É
   - –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —á–µ–∫–∞—Ç–∏ –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

3. **–û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä:**
   - `gpt-oss:latest` - —à–≤–∏–¥–∫–∞ –º–æ–¥–µ–ª—å –¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤
   - 13 GB - –ø—Ä–∏–π–Ω—è—Ç–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–ª—è 64GB RAM
   - 20.9B –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ - —Ö–æ—Ä–æ—à–∞ —è–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

---

## ‚öôÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ default_model

### –õ–µ–≥–∫–∞ –º–æ–¥–µ–ª—å (–º–µ–Ω—à–µ –ø–∞–º'—è—Ç—ñ):

```yaml
swapper:
  default_model: phi3:latest  # 2.2 GB, 3.8B params - —à–≤–∏–¥–∫–∞ –ª–µ–≥–∫–∞ –º–æ–¥–µ–ª—å
```

### Vision –º–æ–¥–µ–ª—å (–¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å):

```yaml
swapper:
  default_model: qwen3-vl:latest  # 6.1 GB, 8.8B params - vision capabilities
```

### Code –º–æ–¥–µ–ª—å (–¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏):

```yaml
swapper:
  default_model: starcoder2:latest  # 1.7 GB, 3B params - code specialist
```

### –í–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:

```yaml
swapper:
  # default_model: gpt-oss:latest  # –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ - –º–æ–¥–µ–ª—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∑–∞ –∑–∞–ø–∏—Ç–æ–º
```

---

## üîß –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –ù–û–î–ê2

### Apple Silicon (M4 Max):
- ‚úÖ `metal_acceleration: true` - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è GPU –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è
- ‚úÖ 40-core GPU - –ø–æ—Ç—É–∂–Ω–∞ –æ–±—Ä–æ–±–∫–∞
- ‚úÖ 64GB RAM - –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –º–æ–¥–µ–ª–µ–π

### Ollama –Ω–∞ –ù–û–î–ê2:
- ‚úÖ Native Ollama: `http://localhost:11434` (—á–µ—Ä–µ–∑ Pieces OS –∞–±–æ brew)
- ‚úÖ Docker Ollama: `http://localhost:11435` (—è–∫—â–æ –∑–∞–ø—É—â–µ–Ω–∏–π)
- ‚ö†Ô∏è Swapper Service –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Native Ollama –∑–∞ –∑–∞–º–æ–≤—á–∞–Ω–Ω—è–º

### –ú–æ–¥–µ–ª—ñ –Ω–∞ –ù–û–î–ê2:
- ‚úÖ 8 –º–æ–¥–µ–ª–µ–π –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (~118 GB –∑–∞–≥–∞–ª–æ–º)
- ‚úÖ –†—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ—Å—Ç—å: LLM, Code, Vision, Reasoning
- ‚úÖ –í–µ–ª–∏–∫—ñ –º–æ–¥–µ–ª—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ (–¥–æ 42 GB)

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞:**
- ‚úÖ `services/swapper-service/config/swapper_config_node2.yaml`
- ‚úÖ –õ–æ–≥—ñ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–∂–µ –¥–æ–¥–∞–Ω–∞ (–≤ `main.py`)
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è Apple Silicon (Metal acceleration)

**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫:**
- –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –Ω–∞ –ù–û–î–ê2
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Swapper Service
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ —Ç–∞ —Å—Ç–∞—Ç—É—Å

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

1. **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ù–û–î–ê2 –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ –ù–û–î–ê1:**
   - –ù–û–î–ê1: NVIDIA GPU, `qwen3-8b` (4.87 GB)
   - –ù–û–î–ê2: Apple Silicon, `gpt-oss:latest` (13 GB)

2. **Ollama –Ω–∞ –ù–û–î–ê2:**
   - –ú–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ Pieces OS –∞–±–æ brew
   - –ü–æ—Ä—Ç: `11434` (native) –∞–±–æ `11435` (Docker)
   - Swapper Service –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `http://localhost:11434`

3. **–ú–æ–¥–µ–ª—ñ:**
   - –ù–∞ –ù–û–î–ê2 –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ —ñ–Ω—à—ñ –º–æ–¥–µ–ª—ñ, –Ω—ñ–∂ –Ω–∞ –ù–û–î–ê1
   - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ä–µ–∞–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º –º–æ–¥–µ–ª—è–º
   - –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ `default_model` –Ω–∞ –±—É–¥—å-—è–∫—É –∑ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö

---

**–ì–æ—Ç–æ–≤–æ –¥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –Ω–∞ –ù–û–î–ê2!** üöÄ





