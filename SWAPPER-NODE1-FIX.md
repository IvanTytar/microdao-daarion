# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è Swapper Service –Ω–∞ Node #1

**–î–∞—Ç–∞:** 2025-11-22  
**–ü—Ä–æ–±–ª–µ–º–∞:** Swapper Service –ø—Ä–∞—Ü—é—î, –∞–ª–µ –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

---

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ endpoints:

1. ‚úÖ `/health` - –ø—Ä–∞—Ü—é—î
   ```json
   {"status":"healthy","loaded_models":0,"timestamp":1763821110.3544931}
   ```

2. ‚úÖ `/status` - –ø—Ä–∞—Ü—é—î
   ```json
   {"loaded_models":[],"max_concurrent_models":1,"model_timeout_seconds":300}
   ```

3. ‚ùå `/api/cabinet/swapper/status` - Not Found
   ```json
   {"detail":"Not Found"}
   ```
   **–ü—Ä–∏—á–∏–Ω–∞:** –ú–æ–∂–ª–∏–≤–æ, –Ω–∞ Node #1 –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è Swapper Service –±–µ–∑ `cabinet_api` –∞–±–æ endpoint –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π.

4. ‚úÖ `/models` - –ø—Ä–∞—Ü—é—î, –∞–ª–µ –ø–æ—Ä–æ–∂–Ω—ñ–π
   ```json
   {"object":"list","data":[]}
   ```
   **–ü—Ä–∏—á–∏–Ω–∞:** –ú–æ–¥–µ–ª—ñ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Swapper Service –Ω–∞ Node #1.

---

## ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

–î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É:
- ‚úÖ `/status` + `/models` –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è
- ‚úÖ –§–æ—Ä–º–∞—Ç `{"object":"list","data":[]}`
- ‚úÖ –ü–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º

### 2. –ü–æ–∫—Ä–∞—â–µ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É

–¢–µ–ø–µ—Ä –ø–æ–∫–∞–∑—É—î:
- ‚úÖ –°—Ç–∞—Ç—É—Å Swapper Service
- ‚úÖ –†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ (single-active)
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—É –º–æ–¥–µ–ª—å (—è–∫—â–æ —î)
- ‚úÖ URL Swapper Service

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–ø—Ä–æ–±–∞ —Ä—ñ–∑–Ω–∏—Ö endpoints

–°–ø—Ä–æ–±–∞ –≤ —Ç–∞–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É:
1. `/api/cabinet/swapper/status` (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–∏–π)
2. `/api/status`
3. `/api/models`
4. `/status` + `/models` (–∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è)
5. `/health` (fallback)

---

## üìã –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –Ω–∞ Node #1

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –î–æ–¥–∞—Ç–∏ –º–æ–¥–µ–ª—ñ –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é Swapper Service:
   ```bash
   # –ù–∞ Node #1
   cat /path/to/swapper-service/config/swapper_config.yaml
   ```

2. –î–æ–¥–∞—Ç–∏ –º–æ–¥–µ–ª—ñ –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:
   ```yaml
   models:
     qwen3:8b:
       path: ollama:qwen3:8b
       type: llm
       size_gb: 4.7
       priority: high
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Swapper Service:
   ```bash
   docker-compose restart swapper-service
   ```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—î Ollama

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Ollama –Ω–∞ Node #1:
   ```bash
   curl http://localhost:11434/api/tags
   ```

2. –Ø–∫—â–æ Ollama –ø—Ä–∞—Ü—é—î, Swapper Service –º–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–æ–¥–µ–ª—ñ.

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –û–Ω–æ–≤–∏—Ç–∏ Swapper Service

–Ø–∫—â–æ –Ω–∞ Node #1 –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞ –≤–µ—Ä—Å—ñ—è –±–µ–∑ `cabinet_api`:

1. –û–Ω–æ–≤–∏—Ç–∏ Swapper Service –¥–æ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó
2. –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ `cabinet_api.py` –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ `main.py`

---

## üéØ –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω

### ‚úÖ –©–æ –ø—Ä–∞—Ü—é—î:
- ‚úÖ Swapper Service –ø—Ä–∞—Ü—é—î (`/health` –ø–æ–≤–µ—Ä—Ç–∞—î `healthy`)
- ‚úÖ Endpoint `/status` –¥–æ—Å—Ç—É–ø–Ω–∏–π
- ‚úÖ Endpoint `/models` –¥–æ—Å—Ç—É–ø–Ω–∏–π
- ‚úÖ –ú–æ–Ω—ñ—Ç–æ—Ä –ø–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç—É—Å Swapper Service

### ‚ö†Ô∏è –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏:
- ‚ö†Ô∏è –ú–æ–¥–µ–ª—ñ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ (–ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫)
- ‚ö†Ô∏è Endpoint `/api/cabinet/swapper/status` –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π (–º–æ–∂–ª–∏–≤–æ, —Å—Ç–∞—Ä–∞ –≤–µ—Ä—Å—ñ—è)

---

## üìä –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –º–æ–Ω—ñ—Ç–æ—Ä—ñ

–¢–µ–ø–µ—Ä –º–æ–Ω—ñ—Ç–æ—Ä –ø–æ–∫–∞–∑—É—î:
- ‚úÖ –°—Ç–∞—Ç—É—Å Swapper Service (healthy)
- ‚úÖ –†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ (single-active)
- ‚ö†Ô∏è –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ —Ç–µ, —â–æ –º–æ–¥–µ–ª—ñ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ
- ‚úÖ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –¥–æ—Å—Ç—É–ø–Ω—ñ/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –º–æ–¥–µ–ª—ñ
- ‚úÖ URL Swapper Service

**URL –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:**
- Node #1: `http://localhost:8899/node/node-1`

---

## üîÑ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–ù–∞ Node #1:**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é Swapper Service
   - –î–æ–¥–∞—Ç–∏ –º–æ–¥–µ–ª—ñ –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∞–±–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ Ollama –ø—Ä–∞—Ü—é—î
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Swapper Service

2. **–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–¥–µ–ª–µ–π:**
   - –ú–æ–Ω—ñ—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∂–µ —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
   - –ê–∫—Ç–∏–≤–Ω–∞ –º–æ–¥–µ–ª—å –±—É–¥–µ –ø—ñ–¥—Å–≤—ñ—á–µ–Ω–∞ –∑–µ–ª–µ–Ω–∏–º
   - –ë—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ–∂–Ω—É –º–æ–¥–µ–ª—å

---

**Last Updated:** 2025-11-22  
**Status:** ‚úÖ –ú–æ–Ω—ñ—Ç–æ—Ä –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ, –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–æ–¥–µ–ª—ñ –Ω–∞ Node #1

