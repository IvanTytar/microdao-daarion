# ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Swapper Service –≤ –∫–∞–±—ñ–Ω–µ—Ç–∞—Ö –ù–û–î

**–î–∞—Ç–∞:** 2025-11-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ

---

## üéØ –ú–µ—Ç–∞

–ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ Swapper Service –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏** –≤ –∫–∞–±—ñ–Ω–µ—Ç–∞—Ö –ù–û–î —ñ –ø—Ä–∞—Ü—é—î –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

---

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–º—ñ–Ω–∏

### 1. –í–∏–¥–∞–ª–µ–Ω–æ –∑–∞–π–≤—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Swapper Service

**–í–∏–¥–∞–ª–µ–Ω–æ:**
- ‚úÖ `SwapperWidget` –∑ `ConsolePage` - –≤–∏–¥–∞–ª–µ–Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–∞ —ñ–º–ø–æ—Ä—Ç
- ‚úÖ `SwapperPage` - –≤–∏–¥–∞–ª–µ–Ω–æ –æ–∫—Ä–µ–º—É —Å—Ç–æ—Ä—ñ–Ω–∫—É
- ‚úÖ –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `/swapper` –∑ `Navigation` - –≤–∏–¥–∞–ª–µ–Ω–æ –∑ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
- ‚úÖ –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `/swapper` –∑ `HomePage` - –≤–∏–¥–∞–ª–µ–Ω–æ –∫–∞—Ä—Ç–∫—É Swapper

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå `http://localhost:8899/swapper` - –±—ñ–ª—å—à–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞
- ‚ùå Swapper Widget –≤ Console - –≤–∏–¥–∞–ª–µ–Ω–æ
- ‚úÖ Swapper Service —Ç—ñ–ª—å–∫–∏ –≤ –∫–∞–±—ñ–Ω–µ—Ç–∞—Ö –ù–û–î

---

### 2. –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

**–§–∞–π–ª–∏:**
- `src/components/swapper/SwapperComponents.tsx`
- `src/components/swapper/SwapperDetailedMetrics.tsx`

**–ó–º—ñ–Ω–∏:**

#### SwapperStatusCard:
```typescript
useEffect(() => {
  fetchStatus();
  const interval = setInterval(fetchStatus, 30000); // Update every 30 seconds
  return () => clearInterval(interval);
}, [nodeId, swapperUrl]); // –î–æ–¥–∞–Ω–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
```

#### SwapperMetricsSummary:
```typescript
useEffect(() => {
  const loadMetrics = async () => {
    const data = await fetchMetrics();
    setMetrics(data);
    setLoading(false);
  };
  
  loadMetrics();
  const interval = setInterval(loadMetrics, 30000); // Update every 30 seconds
  return () => clearInterval(interval);
}, [nodeId, swapperUrl]); // –î–æ–¥–∞–Ω–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
```

#### SwapperDetailedMetrics:
```typescript
useEffect(() => {
  const fetchData = async () => {
    // ... fetch logic
  };

  fetchData();
  const interval = setInterval(fetchData, 30000); // –û–Ω–æ–≤–ª—é—î–º–æ –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
  return () => clearInterval(interval);
}, [nodeId, swapperUrl]); // –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–æ–¥–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–æ–¥–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è URL –¥–ª—è –∫–æ–∂–Ω–æ—ó –Ω–æ–¥–∏

---

### 3. –ü–æ–∫—Ä–∞—â–µ–Ω–æ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è URL Swapper Service

**–§—É–Ω–∫—Ü—ñ—è `getSwapperUrl`:**
```typescript
const getSwapperUrl = (nodeId?: string): string => {
  if (!nodeId) {
    return import.meta.env.VITE_SWAPPER_URL || 'http://localhost:8890';
  }
  
  // –ù–û–î–ê1: node-1, node-1-hetzner-gex44, –∞–±–æ –±—É–¥—å-—è–∫–∏–π ID —â–æ –º—ñ—Å—Ç–∏—Ç—å 'node-1'
  if (nodeId === 'node-1' || nodeId === 'node-1-hetzner-gex44' || nodeId.includes('node-1')) {
    return import.meta.env.VITE_SWAPPER_NODE1_URL || 'http://144.76.224.179:8890';
  }
  
  // –ù–û–î–ê2: node-2 –∞–±–æ –±—É–¥—å-—è–∫–∏–π ID —â–æ –º—ñ—Å—Ç–∏—Ç—å 'node-2'
  if (nodeId === 'node-2' || nodeId.includes('node-2')) {
    return import.meta.env.VITE_SWAPPER_NODE2_URL || 'http://192.168.1.244:8890';
  }
  
  return import.meta.env.VITE_SWAPPER_URL || 'http://localhost:8890';
};
```

**–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ nodeId:**
- `node-1` ‚Üí `http://144.76.224.179:8890`
- `node-1-hetzner-gex44` ‚Üí `http://144.76.224.179:8890`
- `node-2` ‚Üí `http://192.168.1.244:8890`
- –ë—É–¥—å-—è–∫–∏–π ID —â–æ –º—ñ—Å—Ç–∏—Ç—å `node-1` ‚Üí –ù–û–î–ê1
- –ë—É–¥—å-—è–∫–∏–π ID —â–æ –º—ñ—Å—Ç–∏—Ç—å `node-2` ‚Üí –ù–û–î–ê2

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è

### –ö–∞–±—ñ–Ω–µ—Ç –ù–û–î–ê1 (`/nodes/node-1`)

**–í–∫–ª–∞–¥–∫–∞ "–°–µ—Ä–≤—ñ—Å–∏":**
```
üîÑ Swapper Service
‚îú‚îÄ‚îÄ SwapperStatusCard
‚îÇ   ‚îú‚îÄ‚îÄ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É
‚îÇ   ‚îú‚îÄ‚îÄ –ê–∫—Ç–∏–≤–Ω–∞ –º–æ–¥–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ SwapperMetricsSummary
‚îÇ   ‚îú‚îÄ‚îÄ –í—Å—å–æ–≥–æ –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ –ê–∫—Ç–∏–≤–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ –î–æ—Å—Ç—É–ø–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ Uptime
‚îî‚îÄ‚îÄ SwapperDetailedMetrics
    ‚îú‚îÄ‚îÄ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É (CPU, RAM, VRAM, Uptime)
    ‚îú‚îÄ‚îÄ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
    ‚îú‚îÄ‚îÄ –ú–æ–¥–µ–ª—ñ (—Ç–∞–±–ª–∏—Ü—è)
    ‚îú‚îÄ‚îÄ –°–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∏
    ‚îî‚îÄ‚îÄ –ê–∫—Ç–∏–≤–Ω–∞ –º–æ–¥–µ–ª—å
```

**URL Swapper Service:** `http://144.76.224.179:8890`

---

### –ö–∞–±—ñ–Ω–µ—Ç –ù–û–î–ê2 (`/nodes/node-2`)

**–í–∫–ª–∞–¥–∫–∞ "–°–µ—Ä–≤—ñ—Å–∏":**
```
üîÑ Swapper Service
‚îú‚îÄ‚îÄ SwapperStatusCard
‚îú‚îÄ‚îÄ SwapperMetricsSummary
‚îî‚îÄ‚îÄ SwapperDetailedMetrics
```

**URL Swapper Service:** `http://192.168.1.244:8890`

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è

1. **–ù–û–î–ê1:**
   - –í—ñ–¥–∫—Ä–∏—Ç–∏: `http://localhost:8899/nodes/node-1`
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°–µ—Ä–≤—ñ—Å–∏"
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Å–µ–∫—Ü—ñ—ó "üîÑ Swapper Service"
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

2. **–ù–û–î–ê2:**
   - –í—ñ–¥–∫—Ä–∏—Ç–∏: `http://localhost:8899/nodes/node-2`
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°–µ—Ä–≤—ñ—Å–∏"
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Å–µ–∫—Ü—ñ—ó "üîÑ Swapper Service"
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –∫–∞–±—ñ–Ω–µ—Ç –ù–û–î–ê1
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°–µ—Ä–≤—ñ—Å–∏"
3. –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –º–µ—Ç—Ä–∏–∫
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –¥–∞–Ω—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å URL

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ DevTools ‚Üí Network
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–∞–ø–∏—Ç–∏ –¥–æ Swapper Service
3. –î–ª—è –ù–û–î–ê1: `http://144.76.224.179:8890/api/cabinet/swapper/status`
4. –î–ª—è –ù–û–î–ê2: `http://192.168.1.244:8890/api/cabinet/swapper/status`

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚ùå Swapper Service –≤—ñ–¥–æ–±—Ä–∞–∂–∞–≤—Å—è –≤ Console
- ‚ùå –û–∫—Ä–µ–º–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ `/swapper`
- ‚ùå –ü–æ—Å–∏–ª–∞–Ω–Ω—è –≤ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó —Ç–∞ –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- ‚ö†Ô∏è –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–æ–¥–∏

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚úÖ Swapper Service —Ç—ñ–ª—å–∫–∏ –≤ –∫–∞–±—ñ–Ω–µ—Ç–∞—Ö –ù–û–î
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ (–∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è URL –¥–ª—è –∫–æ–∂–Ω–æ—ó –Ω–æ–¥–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–æ–¥–∏
- ‚úÖ –í—Å—ñ –∑–∞–π–≤—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–æ

---

## üéØ –í–∏—Å–Ω–æ–≤–æ–∫

**Swapper Service —Ç–µ–ø–µ—Ä:**
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ –∫–∞–±—ñ–Ω–µ—Ç–∞—Ö –ù–û–î
- ‚úÖ –ü—Ä–∞—Ü—é—î –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î URL –¥–ª—è –∫–æ–∂–Ω–æ—ó –Ω–æ–¥–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–æ–¥–∏

**–í—Å—ñ –∫–∞–±—ñ–Ω–µ—Ç–∏ –ù–û–î –º–∞—é—Ç—å –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ Swapper Service!** üéâ

